通过命令测试多个节点间的网络连通性主要涉及以下几个步骤：首先需要确认节点的状态，例如检查是否有节点被标记为drain状态，并通过命令查询特定原因导致的drain节点列表，同时确认其中的正常节点；其次可以清除节点的dmesg信息以确保没有旧的日志干扰测试结果；最后可以通过具体的网络测试命令来检查节点间的连接状态。1. 使用命令如`yhi -n $drain_nodelist -p ALL`来确认正常开机的节点列表，这有助于排除处于异常状态的节点对测试结果的影响。2. 清除节点的dmesg信息，例如使用`./zni_clean_dmesg_inband.sh`脚本后接节点列表，这样可以避免旧的内核消息影响网络测试的准确性。3. 运行网络测试命令，如`./zni_check_pping_`来检查节点间的ping连接情况，或者使用Lustre文件系统的相关命令如`lst ping`和`lst stat`来检查节点状态和性能统计，从而评估多个节点间的网络连接状态。