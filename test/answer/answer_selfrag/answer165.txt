TH-HPC3系统shu账户提交作业报Communication connection failure错误，可能涉及多个方面的问题，包括节点问题、网络连接、环境配置、资源申请和权限设置等。具体排查步骤如下：1.检查节点状态和通信问题：首先确认系统存储和网络是否正常，然后检查用户作业是否有其他用户残留进程，有的话需要杀掉。接着检查节点是否有报clocksource错，如果存在此类错误，应将问题节点drain掉，并在下次提交作业时使用-x参数剔除该节点。2.检查作业提交方式和资源申请：建议使用yhbatch提交作业，因为yhbatch提交的任务不会因终端关闭或登录节点宕机而中断。同时确保yhbatch申请的资源不小于yhrun需求的资源，避免因资源不足导致通信失败。3.检查环境变量和动态库配置：如果作业运行过程中出现动态库缺失的问题，需将动态链接库的路径添加到环境变量中。例如，使用locate命令找到缺失库的地址$DIR，并在用户目录下的配置文件~/.bashrc中添加“export LD_LIBRARY_PATH=$DIR:$LD_LIBRARY_PATH”。此外，还需确保$DIR为共享目录，以保证计算节点能够正确访问所需库。4.检查MPI运行环境和通信器配置：若作业使用MPI并出现通信器无效的错误（如MPI_Topo_test函数调用失败），可能是由于空通信器或网络问题引起。此时应联系管理员检查节点和网络状态，并确保MPI环境配置正确。5.检查权限和队列设置：若提交作业时提示权限问题（如User's group not permitted to use this partition），需使用yhi命令检查可使用的队列，并确保提交的资源不超过用户的权限限制。6.查看作业日志和系统记录：通过查看Slurm日志或其他系统日志，获取更详细的错误信息，帮助定位问题根源。例如，日志中可能出现“Job credential expired”或“bus error”等提示，这些信息有助于判断是时间同步问题、节点故障还是其他异常情况。7.联系管理员协助处理：如果上述步骤无法解决问题，建议联系系统管理员，提供具体的错误信息和作业日志，以便进一步诊断和解决通信连接失败的问题。
