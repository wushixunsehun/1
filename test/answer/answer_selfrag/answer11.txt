OST磁盘被设置为只读后，恢复读写状态需要按照一系列步骤进行操作，具体包括替换故障 OST、恢复配置文件、挂载 OST 文件系统以及重新激活 OST。1. 替换故障 OST：如果 OST 损坏，可以使用 `mkfs.lustre` 命令并添加 `--replace` 选项来替换故障 OST，并确保使用相同的索引。对于 Lustre 2.5 及更高版本，可以在不恢复配置文件的情况下替换 OST 至原索引处。2. 恢复 OST 配置文件：如果配置文件不可用，可以从其他工作中的 OST 复制 `mountdata` 文件。通过 `debugfs` 工具从其他 OST 提取 `mountdata` 文件，并将其复制到新 OST 的相应位置。3. 挂载 OST 文件系统：在格式化新 OST 后，创建挂载点并使用 `mount` 命令挂载 OST 文件系统。4. 重新激活 OST：如果 OST 永久不可用，需在 MGS 配置中重新激活它，使用 `lctl conf param ost_name.osc.active=1` 命令。如果 OST 暂时不可用，还需在 MGS 和客户端上重新激活。5. 处理 LAST_ID 不一致问题：每个 OST 包含一个 LAST_ID 文件，记录 MDS 预创建的最后一个对象。如果 LAST_ID 与 MDT 中的 lov_objid 不一致，可能导致对象创建问题。从 Lustre 2.6 开始，LFSCK 可自动修复 LAST_ID 文件。6. 终止恢复过程：如果需要终止恢复，可使用 `lctl` 工具或通过 `mount -o abort recov` 命令终止恢复。7. 确定服务 OST 的机器：在管理 Lustre 文件系统过程中，可能需要确定哪台机器正在为特定的 OST 提供服务，可以通过 `lctl get param` 命令获取 OST 节点信息。8. 注意事项：操作过程中需要注意备份与配置恢复，确保文件系统正常运行。同时，避免使用非默认的 inode ratio，以防止空间超限错误。此外，若 OST 磁盘空间不足，可通过扩展空间或迁移文件解决。