Lustre 的网络堆栈由 LNet 代码模块和 LND（网络驱动程序）组成，其中 LNet 层在 LND 层之上操作，负责无连接的、异步的数据传输，而 LND 层则面向连接，负责数据传输验证。Lustre 网络（LNet）支持多种网络类型，包括 InfiniBand、TCP（如 GigE、10GigE、IPoIB）、RapidArray、Quadrics 等。LNet 允许不同网络之间的路由，实现端到端读/写吞吐量接近峰值带宽速率，并通过远程直接内存访问（RDMA）方式提高传输效率。此外，Lustre 网络还支持高可用性和故障切换功能，确保系统在故障时快速恢复。一. Lustre 的网络堆栈组成：1. LNet 代码模块：负责无连接的、异步的数据传输，类似于网络层在数据链路层之上的操作。2. LND（网络驱动程序）：为特定网络类型提供支持，例如 ksocklnd 实现了 TCP Socket LND，支持 TCP 网络。3. LNet 标签：用于标识不同的 LND，如 tcp0、o2ib0、o2ib1 等。4. 网络标识符 (NID)：每个节点至少有一个 NID，由网络接口地址和 LNet 标签组成，形式为 address@LNet label。5. 路由功能：LNet 支持跨多个网络的路由，允许不同网络间的通信。二. Lustre 支持的网络类型：1. InfiniBand：通过 OpenFabrics OFED 支持，提供高速低延迟的网络连接。2. TCP：支持所有基于 TCP 的网络，如 GigE、10GigE、IPoIB 等。3. RapidArray：一种高性能网络技术，支持快速数据传输。4. Quadrics：通过 Elan4 协议支持，提供高效的网络通信。5. RDMA 支持：Lustre 可以利用 RDMA 技术在 InfiniBand、Intel OmniPath 等高级网络上实现快速高效的数据传输。