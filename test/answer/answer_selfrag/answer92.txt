在 Lustre 文件系统中，通过参数配置实现对客户端 Root 用户权限的细粒度控制主要依赖于 Root Squash 机制及例外客户端设置。Root Squash 是一种安全功能，用于限制超级用户访问 Lustre 文件系统的权限，它将 root 用户的 UID 和 GID 映射为指定的值，防止未授权客户端访问 root 文件。1. 配置 Root Squash 参数：Root Squash 由两种配置参数进行管理，即 root_squash 和 nosquash_nids。root_squash 参数用于指定 root 用户访问 Lustre 文件系统使用的 UID 和 GID，例如设置为 500:501。该参数可通过 mkfs.lustre、tunefs.lustre 或 lctl 命令进行配置。2. 设置例外客户端：nosquash_nids 参数用于指定不适用 Root Squash 的一组客户端，使用 LNet NID 范围的语法，如 —nosquash nids=172.16.245.[0-255/2]@tcp，表示子网 172.16.245.0 IP 地址最后一部分为偶数的 TCP 客户端不适用 Root Squash。3. 注意事项和调试：mkfs.lustre 和 tunefs.lustre 不进行参数语法检查，错误的 root squash 参数会在挂载时被忽略，系统将使用默认值。root_squash 参数应由 <dqecnum>:<dqecnum> 指定，而 nosquash_nids 参数应遵循 LNet NID 范围的语法。此外，lctl conf param 命令必须在活动 MGS 上运行，并且每次只能更改一个参数。通过这些配置，可以实现对客户端 Root 用户权限的细粒度控制，确保系统的安全性。