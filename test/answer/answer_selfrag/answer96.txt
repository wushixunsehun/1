Lustre 文件系统中通过 `recovery_time_soft` 和 `recovery_time_hard` 参数控制客户端连接的故障恢复时限，这两个参数分别对应软时限和硬时限，用于管理客户端在服务器故障后重新连接和恢复操作的时间窗口，具体工作原理如下：1. `recovery_time_soft` 参数定义了客户端在服务器故障后尝试恢复连接的软性时间限制，该参数决定了客户端在服务器进入恢复模式后，允许其等待服务器完成恢复操作的最长时间。在此时间内，客户端会持续尝试与服务器建立连接，并重放未完成的请求。如果在软时限内服务器完成了恢复并接受了客户端的连接，客户端可以继续执行后续操作；若超时，则客户端可能进入断开状态并触发重试机制。2. `recovery_time_hard` 参数则设定了客户端在服务器故障后恢复操作的硬性时间限制，即客户端在超过此时间后将不再尝试恢复连接，而是直接终止当前操作并返回错误。该参数作为最终的保障措施，防止客户端无限期地等待服务器恢复，从而避免资源浪费和系统阻塞。当服务器在硬时限内未能完成恢复时，客户端将放弃恢复尝试，确保系统能够快速响应其他请求。综上所述，`recovery_time_soft` 用于控制客户端在合理时间内的恢复尝试，而 `recovery_time_hard` 则作为最后的兜底机制，确保系统在极端情况下仍能保持稳定性和可用性。