在HPC4系统上安装CMAQ v5.4需要从加载编译环境开始，依次安装必要的软件依赖，配置环境变量，并修改Makefile以完成CCTM模块的编译。具体步骤如下：1. 加载编译环境和设置路径：首先加载Intel编译器和MPI库，例如使用命令“module add Intel_compiler/19.1.2”和“module add MPI/Intel/IMPI/2019.8.254”，并指定软件安装路径为“/fs1/home/username/software/wrf-cmaq”。2. 安装netcdf-c和netcdf-fortran：下载netcdf-c源码并解压后，使用ICC编译器进行配置，设置安装路径为上述指定目录，并禁用不需要的功能如DAP和NetCDF-4。接着安装netcdf-fortran时需指定netcdf的头文件和库路径，确保Fortran接口正确链接。3. 配置ioapi：通过git克隆ioapi-3.2源码，进入目录后修改Makeinclude.Linux2_x86_64ifort文件，将编译器设置为mpiicc、mpiicpc和mpiifort，并调整并行编译选项如OMPFLAGS和OMPLIBS，最后执行make configure、make all和make install完成编译。4. 修改环境变量：在config_cmaq.csh文件中设置IOAPI、NETCDF及MPI的包含目录和库目录，例如“setenv IOAPI_INCL_DIR /fs1/home/username/software/wrf-cmaq/ioapi-3.2/ioapi/fixed_src”和“setenv NETCDF_LIB_DIR /fs1/home/username/software/wrf-cmaq/netcdf/lib”。5. 编译CCTM模块：运行bldit_project.csh脚本生成编译配置，随后根据需要修改Makefile中的编译器选项和链接参数，确保CCTM模块能够正确调用已安装的依赖库，最终执行编译命令完成CCTM的构建。在整个过程中，需要注意编译器版本与依赖库的兼容性，避免出现如“unrecognized command line option ‘-m64’”等错误，必要时调整编译选项以适应系统环境。
