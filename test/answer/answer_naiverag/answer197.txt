TH-3F出现“Requested nodes are busy”报错时，主要排查方向包括资源分配、内存限制、脚本执行方式以及节点状态。1. 检查资源分配和内存限制：首先执行的yhrun命令可能分配了所有内存，导致作业无法提交。解决方法是在yhbatch中指定总内存分配，例如#SBATCH mem=120GB，或者在yhrun命令中添加mem=100GB来限制内存使用，避免占用全部物理内存。2. 调整作业核数和编译方式：如果使用64核作业仍然出现问题，建议将vasp作业核数从64改为56以减少资源占用，并尝试使用mpi-n编译的vasp并用mpirun调用。同时设置NPAR=4、KPAR=1以优化计算效率。3. 检查脚本执行方式：确保脚本中没有使用后台执行命令导致yhrun任务在脚本结束后提前回收节点，应移除最后一个命令的&符号或完善脚本监控所有进程结束再退出，确保任务正常完成。4. 检查节点状态和异常日志：部分节点可能出现异常，如dmesg输出显示错误信息，涉及网络设备和内存分配问题。需要检查节点的dmesg日志，确认是否有异常信息，并尝试释放被占用的节点。5. 确认预约和节点释放情况：取消test预约并释放节点，确保节点处于可用状态。通过以上步骤可以逐步排查并解决“Requested nodes are busy”报错问题。

