yhalloc 中设置作业每个任务使用2个CPU的方法如下：1. 使用 --cpus-per-task=ncpus 选项，其中 ncpus 表示每个任务需要的CPU数量，例如设置为2；2. 该选项告知资源管理系统控制进程，作业步的每个任务需要指定数量的处理器，若未指定此选项，系统可能为每个任务分配一个处理器；3. 在使用该选项时，需确保资源足够以满足每个任务所需的CPU数量，例如对于4个任务，每个任务需要2个CPU，则需请求至少8个CPU。