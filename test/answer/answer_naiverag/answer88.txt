通过配置Lustre文件系统的NRS策略可以优化批量读写性能，主要涉及TBF、ORR、TRR等策略类型及其相关参数。1. TBF（Token Bucket Filter）策略用于控制IO请求的速率，支持添加实时特性以确保高优先级请求的带宽分配。可以通过lctl命令设置规则，例如使用realtime=1参数为特定JobID的RPC设置实时处理速率，如“lctl set_param ost.OSS.ost_io.nrs tbf rule=\"start realjob jobid-{dd.0} rate=100 realtime=1\"”，该命令将JobID为dd.0的RPC以100 req/sec的速率进行实时处理。2. ORR（Operation Rate Limiting）策略用于设置支持的RPC类型，如reads、writes或reads_and_writes。通过“lctl set param ost.OSS.ost_io.nrs orr supported=reads|writes|reads_and_writes”命令可以设置ORR策略支持的RPC类型，从而控制不同类型的RPC请求。3. TRR（Target Round Robin）策略基于目标OST索引进行批量循环调度，其参数与ORR类似，可用于调整RPC的调度顺序和速率。TRR策略与ORR策略在实现上相似，但使用目标OST索引来确定RPC的调度顺序。此外，延迟策略可通过设置{service}.nrs_delay_min参数控制请求被延迟的最短时间，模拟高负载环境以测试系统对时间敏感问题的处理能力。这些策略和参数的合理配置能够有效优化Lustre文件系统的批量读写性能。