当OSS节点I/O负载不均时，可以通过调整条带分配策略参数如 qos_threshold_rr 来改善，具体方法包括使用加权分配法来平衡空闲空间差异，同时需要考虑多个因素。1. 调整 qos_threshold_rr 参数可以控制从循环分配切换到加权分配的阈值，默认值为17%，通过命令如 lctl set param lod.fsname*.gos_threshold_rr=25 可以修改该值，从而影响分配策略的选择。2. 加权优先级由 qos_prio_free 参数控制，增加该值会提高对空闲空间的权重，减少对条带分布方式的权重，当设置为100时，条带算法完全基于空闲空间。3. 设置中需要考虑 OST 的可用空间和空闲 inode 数量，当可用空间低于保留空间或空闲 inode 少于32个时，MDT 停止分配，而当可用空间达到保留空间的两倍且空闲 inode 超过64个时，重新开始分配。此外，还需要注意 osp.x*.reserved_mb_low 和 osp.x*.reserved_mb_high 参数，它们控制对象分配的可用空间下限和上限。同时，Lustre 支持循环分配和加权分配两种方式，根据 OST 间空闲空间差异进行切换，QoS 参数如 qos_threshold_rr 和 qos_prio_free 用于控制分配策略和权重。最后，还需考虑客户端的写入行为，例如客户端可始终追加写入现有文件，以及文件分条数量受 MDT 类型和功能的影响，如 DoM 功能通过将小文件存储在 MDT 上提升性能。