{
    "query": "在路由容错脚本中，参数allowerr 和renew 分别代表什么操作？",
    "summaries": [
        "该文本介绍了配置绕路由和恢复路由的脚本使用方法，适用于突发SWM掉电情况，需先用allowerr绕过故障框，恢复后用renew。服务故障时监控系统会自动重启并消警，否则需手动重启。登录节点负载过高时，可通过运维平台查看CPU和内存进程排序，进行清理操作。",
        "Lustre 文件系统操作手册摘要：inetctl 命令用于管理路由，包括添加、删除和显示路由信息。路由配置涉及网络名称、网关、跳数和优先级等参数。启用路由功能后，可配置路由缓冲区（微型、小型、大型），并可通过命令调整缓冲区数量。非对称路由检测可防止潜在攻击，可通过命令开启或关闭。YAML 配置文件支持批量操作路由配置，支持添加、删除和显示操作。",
        "本文档介绍了Lustre文件系统中路由存活条件和LNet Health特性。路由有效需满足网关可达或远程网络有健康接口。LNet Health通过维护接口健康值，提升多轨通信的可靠性，支持故障检测和重传。健康值初始为1000，根据操作状态调整。故障类型包括本地和远程错误，影响重传行为。用户可通过模块参数控制健康评估、恢复间隔、事务超时和重试次数，以适应不同网络环境。"
    ],
    "contents": [
        "timeout | 这个超时值一是程度上是一个过载值。它具有以下功能: - 当超过lnet transaction timeout时间且未达到*etzy_count充数次数时，如果消息发送不成功，则该消斩将被放弃。-如果在lnet_transaction timeout时间内没有收到了REPLY 或ACK，则该 GET或PUT 请求会超时。该值默认为 30 秒。Lnetct1l set transaction timeout:Message/Response timeout >0 - timeout in secondqs注意下一节中描述的 LND 超时也包含在lnet transaction timeout内。这意味着，在预计会有168\nLustre 文件系统操作手册 译者:As大很大延迟的网络中，有必要相应地增加该值。| | Inet retry count | 当 LNet检测到它认为可以重新发送消息的故障时，接下来它会检查消息是否已超过指定的最大重斌次数retry_count。 Zi, UA AACA MI, BRON AA会被传递到发起消息发送的层处理。由于消息重试间隔 (Lnet_1nd_timeout)是 根 据Inet transaction timeout/Inet retry count计 算 的，此Inet_retry_count应保持必够低，以使重试间隔不短于网络中HN GR JA EA mE GR. xX F 50 # AY RB Wdnet transaction timeout,将lnet_ retry_ count BEY WAS at G@ PEAY. Inetctl set retry count:number of retries 0 - turn off retries >0 - number of retries,cannot be more than Inet transaction timeout | | Inet 1nd timeout| 这不是一个可配置的参数，但它是从两个可配置的参数派生出来的: lnet transaction timeout和retry_count。lnet 1nd timeout= Inet transaction timeout / retry countlAl 此，此处存在一个限制1net_transaction timeout >= retry_count这里假设在一个健康的网络中，发送和接收 LNet 消息不应有大的延迟。RPC 消息及其响应可能会有很大的",
        "BA on ZAR FER AP16.5.3. 用户接口LNet Health 默认处于关闭状态。可用于控制 LNet Health 功能模块参数有多个。所有模块参数都在 sysf ASEH, fe /sys/module/inet/parameters/. HV通过癌它们回显一个值来直接设置，或在 Inetctl 中设置。| 故障类型 | fig WE | | -------------------------- | nannnnnnn nnn cnc--------------- | | lnet health sensitivity | 当 LNet 检测到特定接口上的故障时，它将按照健康灵敏度Inet_health_sensitivity来降低其健康值。lnet_health_sensitivity的值越大，界面恢复健康所需的时间就越长。其默认值设置为0，这意味肴健康值不会诚少，同时表示健康功能是关闭的。灵敏度的值可以设置为大于0。1lnet health _ sensitivity为100 意味着，连续 10 次消息失败，或稳态故隐率超过 1% 会降低接口的健康值，直到该接口被禁用，而较低的故障率会引导流量纪过该接口，但它仍继续可用。当接口发生故障时，其健康值会递减，并标记该接口进行恢复。lnetct1 set health sensitivity: sensitivity to failure0 - turn off health evaluation >0 - sensitivity value not morethan 1000 | | lnet recovery interval | 当 LNet 在本地或远程接口上检测到故隐时，包会将该接口放在恢复队列中。本地接口和远程接口各有一个恢复队列。恢复队列上的接口将在每一个Inet_recovery_interval间 隔被 PING 检测一次。该值默认为1秒。每次成功 PING 通时，该接口的健康值将增加 1l。通过配置该值，系统管理员可以控制网络上的流量。lnetct1lset recovery interval: interval to ping unhealthy interfaces>0 - timeout in seconds ||lnet transaction timeout | 这个超时值一是程度上是一个过载值。它具有以下功能: - 当超过lnet transaction timeout时间且未达到*etzy_count充数次数时，如果消息发送不成功，则该",
        "为路由硕时，LNet 消息不会指癌目己。该功能可通过以下命令局用或禁用:Jnetct] set routing [0 | 1]# 0 - disable routing feature# 1 - enable routing feature9.1.8. 显示路由信息在节点上启用路由时，会分配微型、小型和大型路由缓冲区，相关信息可通过如下命令进行查看:Inetctl routing show: show routing informationExample:Inetctl routing show输出如下 :> Inetctl routing showrouting:- cpt[0O]:tiny:npages: 0nbuffers: 2048credits: 2048mincredits: 2048small:npages: 1nbuffers: 16384credits: 16384mincredits: 16384large:npages: 25682\n10171819—OoLustre 文件系统操作手册 译者:这aynbuffers: 1024credits: 1024mincredits: 1024- enable: 19.1.9. 配置路由缓冲所配置的路由绥神区值指定了每个微型、小型和大型组中的缓冲区数量。通前建议您将微型、小型和大型路由组神区数量配置为默认值以外的某些值。这些值是全局值，设置时它们将被所有 CPU 分区共享。如果司用了路由，则设置的值将立即生效。如果指定了大量的缓冲区，则将分配缓冲区以满足配置更改; 如果指定了较少的绥补区，则将释放多余的未使用状态的缓冲区。如果未设置路由，则该值不会更改。如果路由在关闭后打开，则缓冲区值将重置为默认值。lnetctlset 命令用于设置绥神区值。当该值比 0 大时，设置相应数量的绥神区。当该值为0时，重置缓冲区数量为默认值。set tiny buffers:set tiny routing buffersVALUE must be greater than or equal to 0set small buffers: set small routing buffersVALUE must be greater than or equal to 0set large buffers: set large routing buffersVALUE must be greater than or equal to 0用例:VlInetctl set tiny buffers 4096VInetctl set small buffers 8192VInetctl set large buffers 2048绥冲设置可重置为默认值:VInetctl set tiny buffers 0VInetctl set small buffers 0> lnetctl",
        "tiny buffers 4096VInetctl set small buffers 8192VInetctl set large buffers 2048绥冲设置可重置为默认值:VInetctl set tiny buffers 0VInetctl set small buffers 0> lnetctl set large buffers 09.1.10. 非对称路由83\nLustre 文件系统操作手册这ay9.1.10.1. BEA JEM PRE ETA K A eR A AN APS a I远程对等点。在调试网络时，非对称路由可能会出现问题，也会为恶意的客户端向服务需注入数据的攻击打开大门。因此,，在 LNet 应打开非对称路由检测，从而能检测到任何非对称的路由的消恩，并将其丢弃。9.1.10.2. 配置”打开或关闭非对称路由检测，可以使用如下命令—Inetctl set drop asym route [0 | 1]ane LYE TE. ROR Lustre HERS BETA RABY DR RE ES非对称路由消息。可参阅“9.1.2 显示全局设置\" To使用Inetct1 global show命令检碍当前的 drop asym route ii. BRU FE,非对称路由检测处于关闭状态。9.1.11. 引入 YAML 配置文件相关配置可用 YAML 格式描述并输入到Inetctl 实用程序中。lnetct1将解析YAML 文件并在其中描述的所有项目上执行指定的操作。如果其中的命令未定义任何操作，则默认操作为\"添加\" 。YAML 的语法将在后面章节介绍。1 lnetctl import FILE.yaml2 Inetctl import < FILE. yamlInetctl impott命令提供了三个可选参数来定义要在 YAML 文件中描述的项目上执行的操作。1 # if no options are given to the command the \"add\" command is assumed2 # by default.3 lnetctl import --add FILE.yaml14 Inetctl import --add < FILE.yaml6 # to delete all items described in the YAML file7 lnetctl import --del FILE.yam18 lnetctl import --del < FILE. yaml10 # to show all items",
        "allowerr为绕路由，renew为恢复路由\n[root@nn31%TH3 ShellTools]# ./config_swm_allow_err_by rt.sh\nshould input parameter\n\nparal:swm_nrm for example S@05A S007D\n\npara2: function for example allowerr or renew\n\nusage: ./config_swn_allow_err_by rt.sh S003A S0@5A S007D renew\n\n[root@nn31%TH3 ShellTools]# ff\n本脚本适用于突发swm掉电情况，yhst查到确实掉电了，先用绕路由工具将该框绕过去，然后再查询掉电原因。\n操作说明：执行脚本，输入参数为框+allowerr，板卡恢复之后用renew。\n5.3 服务故障\n服务出故障后监控系统会自动重启服务，然后报警自动消掉。\n如果报警没消掉，值班人员需要通过运维平台手动重启服务。\n在服务操作页面可以查看服务状态，如下图所示：\n统一监控运维平台 Epos\n\nama\n\nTH-3F\n TH-HPCAQ TH-3F\n TH-HPC\n\n剧本编排 TH-eX\n\nin\n\nSIE @)\n\n剧本执行\n\n执行审计\n您确定要执行服务操作操作吗?\n5.4 登录节点负载过高\n查询对应节点，选择“查看负载”，“cpu进程排序”和“内存进程排序”。\n统一监控运维平台= 运维管理Q x wm\n\n8B 监控管理- a\n\nD fen\n\nTH-3F\n其他操作一一\nCo]os 节点编号: In0\n日 ce TH-3F\n剧本编排日 Vo25序号: 4423所属集群 TH-3F硬盘大小. 无硬盘\n日 login节点名称: In0所属分区: _null硬盘类型: 无硬盘\n全节点类型: 登录节点存储位置: 1903机房-TH-3F-VO-25-节点状态: 连接成功 |\n23.0\n查看cpu负载高的进程\n查询日志查询内存清除用户进程清除进程cpu进程排序\n\n查看内存负载高\n的进程\nIn0:cpu进程排序 *\n\nPID|X%cpPu %nEM| vsz RSS TTYSTAT START",
        "hops to final destination8 (1 < hops < 255)9 —-priority: priority of route (0 - highest prio)1011 Example:12 Inetctl route add --net tcp2 --gateway 192.168.205.130@tcp1 --hop 2 --prio 1Inetctl 命令用于删除路由。80\n—Nn1012131415—ULDLustre 文件系统操作手册 译者:这ayinetctl route del: delete a route—-net: net name (ex tcp0)—-gateway: gateway nid (ex 10.1.1.2@tcp)Example:Inetctl route del --net tcp2 --gateway 192.168.205.130@tcpl1Inetctl 命令用于显示配置的路由。Jnetct] route show: show routes—-net: net name (ex tcp0) to filter on--gateway: gateway nid (ex 10.1.1.2@tcp) to filter on--hop: number of hops to final destination(1 < hops < 255) to filter on--priority: priority of route (0 - highest prio)to filter on—-verbose: display detailed output per routeExamples:# non-detailed showlInetctlroute show# detailed showlInetctlroute show --verbose使用 --verbose we H] MAN EEA fa AA AN fi kN A SR ie NYYAML 格式。以下为简略版和详细版 :#Non-detailed output> lnetctl route showroute:—- net: tcp2gateway: 192.168.205.130@tcpl#detailed output> lnetctl route show --verboseroute:—- net: tcp2gateway: 192.168.205.130@tcpl81\n121314——ULD12131415Lustre 文件系统操作手册i这ayhop: 2priority: 1state: down9.1.7. 司用和蔡用路由当一个 LNet 下氮被配置为路由硕时，LNet 消息不会指癌目己。该功能可通过以下命令局用或禁用:Jnetct] set routing [0 | 1]# 0 - disable routing feature# 1",
        "SS AE A Be AfFCO Se ARH He BEY Pe RASH ETA FE AT16.4.4 路由存活条件如采满足以下条件，则认为路由是有效的:1. 网关可以通过至少一条路径到达本地网络上的网关。2. 如果启用了 void_asym_router_failure， 那么路由中定义的远程网络必须至少有一个健康的接口。(以下由 Lustre2.12 引入)16.5. LNet Health多轨 LNet 实现了在同一 LNet 网络上或跨多个 LNet 网络使用多个接口的能LNet Health 特性为每个本地和远程接口增加了维护健康值的功能。这使得多轨算法在选择通信的接口乙前可以考虑接口的健康状况。在检测到接口或网络故障时，该功能提供了路不同接口重新发送消息的能力。这样 LNet 可以在将故障传递给上层以进行进一步的错误处理乙前，缓和通信故障。为实现这个功能，LNet Health 监视发送和接收操作的状态，并根据该状态是成功还是失败，决定增加或减少接口的健康值。16.5.1. 健康值本地或远程接口的初始健康值设置为LNET_MAX_HEALTH _ VALUE，该值目前为1000。考虑到健康粒度，这个值本身可以是任意的，而不是简单的布尔状态。粒度使得多轨算法可以选择最有可能发送或接收消息的接口。16.5.2. 故障类型和行为LNet Health 行为取雇于检测到的故障类型:\nLustre 文件系统操作手册 译者: 李硕故障类型 行为localresend BRA TAHOMA wR, WORN SUES SCHUSTER ER 6 TR POMBE AT AEE EA , Alte LDlocalno-resend ”系统中出现本地不可恢复错误，如内存不足错误。在这些情况下，LNet 不会尝试重remoteno-resend 5k LNet 成功发送了一条消息，但该消息未完成或未收到预期的回复，则该消生会remoteresend wWA—ZAnba, FRAIL A HOTA SE BA on ZAR FER AP16.5.3. 用户接口LNet Health 默认处于关闭状态。可用于控制 LNet Health 功能模块参数有多个。所有模块参数都在 sysf ASEH, fe"
    ]
}