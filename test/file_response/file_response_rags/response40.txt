{
    "query": " 提交批处理作业时，如何设置标准输出文件名格式为job_%j.out ？",
    "summaries": [
        "yhbatch 是用于提交批处理作业的命令，支持多种选项来控制作业的资源分配、执行方式和依赖关系。例如，--overcommit 允许每个处理器运行多个任务，-o 指定输出文件，--partition 选择资源分区，--time 设置运行时间限制，-p 指定分区，--dependency 定义作业依赖关系等。此外，还支持资源限制传递、作业重新排队、节点共享、临时磁盘空间设置等功能。环境变量也可用于设置选项，且命令行选项优先级高于环境变量。",
        "该文本列出了多个编译选项和配置，涉及不同编译器（如Intel、GNU、PGI、Cray等）及其对应的架构和环境。用户需选择一个编号进行编译，并设置嵌套选项。随后提供了提交作业的脚本示例，包括SBATCH参数、运行命令和作业管理命令（如yhbatch、yhq、yhcancel）。",
        "用户需在`user_nl_clm`中添加特定namelist变量修改，如`use_cndv`、`use_vichydro`等，根据compset和选项设置。设置`fsurdat`为指定路径，`hist_fincl1`定义输出变量，`hist_nhtfrq8760`设置频率，`hist_mfilt=400`。在`user_nl_datm`中修改namelist变量，使用`preview_namelists`查看输出，修改stream文件并复制到`$CASEROOT`。最后修改`filePath`为指定路径，运行`preview_namelists`，构建案例并提交作业脚本`sub.sh`。"
    ],
    "contents": [
        "node.e --tmp=VMB最少临时磁盘空间。。 -u, --usage显式简短帮助信息并退出。e -—-uid=userDAF user 的号份提交和运行作业，而不是执行 yhbatch 的用户。执行 yhbatch的用户号份将用于检查目标分区的访问权限。例如，root 用户可以使用此选项在RootOnly 分区中以普通用户寻份运行作业。wser 可以是用户名或数值用户 UID。e -V, --version显示版本信息并退出。e -v, --verbose增加 yhbatch MIHAILA. AMS Sv. SAUL F OLEACEAEe -w, --nodelist=node name listte OR Ta EAT A EAE BEY VA AG SP BE 2% BEB] CT cn[1-5,7,..)) Fax o MUZE FEY FEAST A AE CAR «BREA A 4 II AS BARE家资源管理系统重新排序。e --wckey=wckey作业使用的 wekey. AACE CPE TrackWCKey=no (ik), UCT KAR II.e --wrap=command stringyhbatch 将把指定的命令串包闭成一个简单的“sh”shell 脚本，并把该脚本提交到控制进程。当使用 --wrap 时，不能在命令行指定脚本名字和参数。e -x, --exclude=node name list不要将指定的节点分配给作业。186\n16.4. yhbatch输入环境变量在司动时，yhbatch 将读取并处理如下环境变量中设置的选项。请注意，环境变量中的选项将轿盖批处理脚本中的选项，而命令行选项将履盖环境变量中的选项。。 SBATCH ACCOUNT: 同 -A, --account。 SBATCH_ACCTG_FREQ: 同 --acctg-freq。 SLURM_CHECKPOINT: 同 --checkpoint。 SLURM_CHECKPOINT_DIR: [A] --checkpoint-dir。 SBATCH_CONN_TYPE: [A] --conn-type。 SBATCH_CPU_BIND: 同 --cpu_bind。 SBATCH DEBUG: 同 -v, --verbose。 SBATCH DISTRIBUTION: 同 -m,",
        "the contents of a stream txt file, first use preview_namelists\n! to obtain the contents of the stream txt files in CaseDocs, and then\n! place a copy of the  modified stream txt file in $CASEROOT with the string\n! user_ prepended.\n!\nstreams = \"datm.streams.txt.CLM1PT.CLM_USRDAT 2012 2012 2012\",\"datm.streams.txt.presaero.clim_2000 2000 2000 2000\"\ntaxmode = 'cycle','cycle','cycle'\n./preview_namelists\ncp ./CaseDocs/datm.streams.txt.CLM1PT.CLM_USRDAT user_datm.streams.txt.CLM1PT.CLM_USRDAT\nvi user_datm.streams.txt.CLM1PT.CLM_USRDAT\n最后的\nfilePath修改为/fs2/home/niuhl/nhl/inputdata/atm/datm7/1x1_maqu/\n./preview_namelists\n./case.build skip-provenance-check\n编写sub.sh脚本：\n#!/bin/bash\n#SBATCH -N 4\n#SBATCH -n 224\n#SBATCH -p cp6\n#SBATCH -e err_test\n#SBATCH -o out_test\ntime yhrun mpi=pmix ./.case.run\n提交作业：\nyhbatch sub.sh",
        "62. (dmpar)  63. (dm+sm)   PGI (pgf90/pgcc): -f90=pgf90\n64. (serial)  65. (smpar)  66. (dmpar)  67. (dm+sm)   INTEL (ifort/icc): HSW/BDW\n68. (serial)  69. (smpar)  70. (dmpar)  71. (dm+sm)   INTEL (ifort/icc): KNL MIC\n72. (serial)  73. (smpar)  74. (dmpar)  75. (dm+sm)   AMD (flang/clang) :  AMD ZEN1/ ZEN2/ ZEN3 Architectures\n76. (serial)  77. (smpar)  78. (dmpar)  79. (dm+sm)   FUJITSU (frtpx/fccpx): FX10/FX100 SPARC64 IXfx/Xlfx\nEnter selection [1-79] : 15\nCompile for nesting? (1=basic, 2=preset moves, 3=vortex following) [default 1]: 1\n./compile -j 2 em_real >&logs&\n作业提交\n编写sub.sh脚本\n#!/bin/bash\n#SBATCH -N 4\n#SBATCH -n 224\n#SBATCH -p cp4\ntime yhrun mpi=pmix ./wrf.exe\n提交作业：\nyhbatch sub.sh\n查看作业状态\nyhq\n取消作业\nyhcancel [jobid]",
        "! Users should add all user specific namelist changes below in the form of\n! namelist_var = new_namelist_value\n!\n! EXCEPTIONS:\n! Set use_cndv           by the compset you use and the CLM_BLDNML_OPTS -dynamic_vegetation setting\n! Set use_vichydro       by the compset you use and the CLM_BLDNML_OPTS -vichydro           setting\n! Set use_cn             by the compset you use and CLM_BLDNML_OPTS -bgc  setting\n! Set use_crop           by the compset you use and CLM_BLDNML_OPTS -crop setting\n! Set spinup_state       by the CLM_BLDNML_OPTS -bgc_spinup      setting\n! Set co2_ppmv           with CCSM_CO2_PPMV                      option\n! Set fatmlndfrc         with LND_DOMAIN_PATH/LND_DOMAIN_FILE    options\n! Set finidat            with RUN_REFCASE/RUN_REFDATE/RUN_REFTOD options for hybrid or branch cases\n!                        (includes $inst_string for multi-ensemble cases)\n!                        or with CLM_FORCE_COLDSTART to do a cold start\n!",
        "(serial)  27. (smpar)  28. (dmpar)  29. (dm+sm)   INTEL (ifort/icc): IBM POE\n30. (serial)               31. (dmpar)                PATHSCALE (pathf90/pathcc)\n32. (serial)  33. (smpar)  34. (dmpar)  35. (dm+sm)   GNU (gfortran/gcc)\n36. (serial)  37. (smpar)  38. (dmpar)  39. (dm+sm)   IBM (xlf90_r/cc_r)\n40. (serial)  41. (smpar)  42. (dmpar)  43. (dm+sm)   PGI (ftn/gcc): Cray XC CLE\n44. (serial)  45. (smpar)  46. (dmpar)  47. (dm+sm)   CRAY CCE (ftn $(NOOMP)/cc): Cray XE and XC\n48. (serial)  49. (smpar)  50. (dmpar)  51. (dm+sm)   INTEL (ftn/icc): Cray XC\n52. (serial)  53. (smpar)  54. (dmpar)  55. (dm+sm)   PGI (pgf90/pgcc)\n56. (serial)  57. (smpar)  58. (dmpar)  59. (dm+sm)   PGI (pgf90/gcc): -f90=pgf90\n60. (serial)  61. (smpar)  62. (dmpar)  63. (dm+sm)   PGI (pgf90/pgcc): -f90=pgf90\n64. (serial)  65. (smpar)",
        ", --overcommit183\n资源管理系统手册WEE AUR. AY, yhbatch 为每个处理器分配一个任务。指定 --overcommit时，将显式允许每个处理器上运行多个任务。然而，每个节点上运行的任务数不超过 MAX TASKS PER NODE 个任务。。 -o, --output=filename pattern将批处理脚本的标准输出写到 filename pattern 指定的文件中。文件名规范清参见--input 选项。。 --open-mode=append|truncate使用附加模式或截断模式打开标准输出和标准错误文件。缺省值由系统配置文件中的 JobFileAppend 参数指定。e -P, --denpendency=dependency_list延迟运行作业，直到指定的依赖关系被满足。dependency_1stf 形如 type:jobid|:jobid|[tpe:7obid[:7opid]j。多个作业可以共享使用相同的依赖关系，这些作业也可以属于不同的用户。作业提交后可以通过 yhcontrol 命令修改依赖关系。一 after: jobid|:jobid...]此作业可在指定的作业开始执行后运行。一 afterany: jobid|:jobid...]此作业可在指定的作业终止后运行。一 afternotok: jobid|:jobid...]此作业可在指定的作业失败〈非 0 退出码，节点失效，超时等) 后运行。一 afternotok: jobid|:jobid...]此作业可在指定的作业成功〈运行结束，退出码为 0) 后运行。— singleton此作业在之前运行的具有相同名字和用户的作业终止后运行。e。 -p, --partition=partition name在指定分区中分配资源。如未指定，则由控制进程在系统默认分区中分配资源。。 --propagate[=rlimits]将那些可修改〈软) 资源限制传递到计算贡点并应用到作业任务进程。如未指定riizp2its，则传递所有资源限制。资源管理系统文持如下资源名字《尽管有些系统不文持茶些选项):— ALL: 所有资源限制184\n16.4. yhbatch— AS: 进程的最大地址空间— CORE: core 文件大小— CPU: 最多 CPU 时间— DATA: 进程的数据段大小— FSIZE: 所创建",
        "16.4. yhbatch— AS: 进程的最大地址空间— CORE: core 文件大小— CPU: 最多 CPU 时间— DATA: 进程的数据段大小— FSIZE: 所创建文件的大小— MEMLOCK: 锁定内存的大小— NOFILE: 打开文件数目— NPROC: 可用进程数目— RSS: 最大物理内存— STACK: 栈大小-Q, --quiet不要输出一般信息。错误信息仍将显示。--qos=qos作业的服务质量。QOS 可以在记账数据库中为每个用户/系统/帐号 association 定义。当系统配置参数 AccountingStorageEnforce 包含“qos”时，用户将仅能使用为其 association 定义的 QOS。—-requeue在节点失效时将作业重新排队。当作业被重新排队后，批处理脚本从头开始执行。参见 —-no-requeue 选项。配置参数 JobRequeue 控制系统上的缺少行为。--reservation=name从指定的预约中为作业分配资源。-s, --share作业可以与其它运行作业共享节点。这可以导致更早分配资源，以及更高的系统利用率，但是由于竞争节点内的资源，应用的性能可能会下降。缺省的共享/互斥行为与系统配置相关。-t, --time=time作业运行的总时间限制。如果请求的时间限制超过分区的时间限制，作业将保持在排队状态。缺省的作业运行时间限制是分区的时间限制。当到达运行时间限制时，作业的所有作业步的所有任务都将被发送 SIGTERM 和 SIGKILL 信号。两个信号之185\n资源管理系统手册间的时间间隔有系统配置参数 KillWait 指定。时间限制设置为 0 表示没有时间限制。可用的时间格式包括“7pzpautes” “minutes:seconds”, “hours:minutes:seconds”,“days-hours”, “days-hours:minutes”, VU “ days-hours:minutes:seconds”。 —-tasks-per-node=n[a] --ntasks-per-node.e --tmp=VMB最少临时磁盘空间。。 -u, --usage显式简短帮助信息并退出。e -—-uid=userDAF user 的号份提交和运行作业，而不是执行",
        "or with CLM_FORCE_COLDSTART to do a cold start\n!                        or set it with an explicit filename here.\n! Set maxpatch_glc       with GLC_NEC                            option\n! Set glc_do_dynglacier  with GLC_TWO_WAY_COUPLING               env variable\n!\nfsurdat='/fs2/home/niuhl/nhl/surface_data/surfdata_1x1_MAQU_hist_16pfts_Irrig_CMIP6_simyr2000_c221110.nc'\nhist_fincl1 = \"TG\",\"TSOI_10CM\",\"TSOI\",\"FSH\",\"H2OSOI\",\"SOILLIQ\",\"Rnet\",\"FCTR\",\"FGEV\",\"FCEV\",\"LWup\",\"FLDS\",\"FSR\",\"FSDS\",\"FGR\"\n!hist_empty_htapes = .true.\nhist_nhtfrq8760\nhist_mfilt=400\nvi user_nl_datm\n!\n! Users should ONLY USE user_nl_datm to change namelists variables\n! Users should add all user specific namelist changes below in the form of\n! namelist_var = new_namelist_value\n! Note that any namelist variable from shr_strdata_nml and datm_nml can\n! be modified below using the above syntax\n! User preview_namelists to view (not modify) the output namelist in the\n! directory $CASEROOT/CaseDocs\n! To modify the contents of a stream txt file, first use preview_namelists\n! to obtain the contents of the stream txt files in CaseDocs, and"
    ]
}