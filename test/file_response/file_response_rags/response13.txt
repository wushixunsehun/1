{
    "query": "lctl get_param 命令有什么作用？适合用在哪些诊断场景？",
    "summaries": [
        "Lustre 文件系统操作手册中介绍了 lctl 工具的使用，用于配置、维护和调试 Lustre。lctl 可以在交互模式下运行，支持多种命令如 list nids、ping、network up/down 等，用于网络和设备管理。通过 lctl set param 和 lctl conf param 可设置临时或永久参数，避免直接访问 /proc 文件系统。lctl get param 用于获取参数值，lctl list param 列出所有可设置参数。部分参数可通过 MGS 节点进行全局设置，且支持通配符和递归操作。",
        "该文本是关于Lustre文件系统中`lnetctl`工具的代码片段，涉及命令行参数解析和路由配置功能。代码使用`getopt_long`处理命令行选项，支持`-n`（网络）、`-g`（网关）、`-c`（跳数）、`-p`（优先级）和`-h`（帮助）等参数。解析后的参数用于调用`lustre_inet_config_route`函数配置路由，若出现错误则输出错误信息并返回相应错误码。代码还包含部分错误处理逻辑，如忽略无效选项。",
        "Lustre 文件系统参数可通过多种工具设置和查看。首次格式化文件系统时，使用 `mkfs.lustre` 命令并添加 `--param` 选项设置可调试参数。当服务停止时，使用 `tunefs.lustre` 添加或修改参数，支持附加或清除原有参数。运行时可通过 `lctl` 设置临时或永久参数，其中 `lctl set_param` 用于临时设置，`lctl conf_param` 用于永久设置，并将参数写入配置文件。`lctl list_param` 可列出所有可设置参数，`lctl get_param` 用于报告当前参数值。"
    ],
    "contents": [
        "指定的OBD 设备。所有其他命令以此命令所设置的设备为基础。device list 显示本地 Lustre OBD, a/k/a dl.设备操作选项 说明list param [-F|-R]parameter列出 Lustre 或LNet 参数名。557UAE\nLustre 文件系统操作手册这ay选项[parameter ...]一了上get_Param [-n|-N|-F]parameter[parameter ...]-n-Nset param [-n]parameter=value-nconf param [-djdevice fsnameparameter=value译者:说明分别为目录，符号链接和可写文件添加7] ，\"@'或 tt递归列出指定路径下的所有参数。如果未指定param Path，则显示所有参数。从指定路径获取 Lustre 或 LNet 参数值。仅打印参数值而不打印参数名称。仅打印匹配的参数名称而不打印值; 在使用模式时特别有用。指定了-N 时，分别为目录，符号链接和可写文件添加/7 ，'\"8'或\"= '。设置指定路径中 Lustre 或LNet 参数的值。+] EVIE INAH key 名称。通过 MGS 为设备设置永久配置参数。此命令必SSME MGS “WR EjiesF. letl list Param下的所有可写参数 (如Lct1 list_param -Fosc.*.*| grep) 可使用LIct1 conf param进行永久设置，但格式略有不同。conf Param需要先指定设备后指定 obdtype，且不文持通配符。此外，可以添加(或删除) 故障转移节点，也可以设置一些系统范围的参数 (sys.at_max，sys.at_min, sys.at_extra, sys.at_early_margin,sys.at history, sys.timeout, sys.ldlm_ timeout).558\nLustre 文件系统操作手册Re: 李硕选项-d device|fsname.parameteractivatedeactivateabort recovery注意说明对于系统范围的参数，device 将被忽略。删除参数设置〈下次重司时使用默认值)。将值设置为空也会删除参数设置。在停用操作后重新激活导入。此设置仅在重新启动后有效 Chil conf",
        "控制Lustre，从而进行各种配置、维护和调试。44.3.1. 梗概1 lctl [--device devno] commana [args]44.3.2. 说明可以通过发出 loth 命令在交互模式下调用 lctl 实用程序。最和见的 lctl 命令有:1 dl2 dk3 device4 network up|down5 list nids6 ping nidhelp7 quit555\n—————Lustre 文件系统操作手册 译者:这ay获取可用命令的完整列表，请在1ct1提示符下键入heIP。获得有关命令的含义和语法，请键入heIP_ commandq。使用TAB 键可补全命令 〈取诀于编译选项) ，使用上下箭头键可查询命令的历史记录。对于非交互式使用，请使用二次调用，即在连接到设备后运行该命令。44.3.3. 使用 lect 设置参数由于平台的不同，使用 procfs 接口并不总是可以成功访问 Lustre 参数。1ct1l{get,set} param作为独立于平台接口的解决方案，已被 Lustre 引入为可调参数，从而避免直接引用/proc/{fs,sys}/{LIustreInet}。考虑到将来使用的可移植性，请使用 lctl {get,set} param.SOE RSIS THT, FESS HMA TT EEA ctl set_pParam命令设置临时参数 CRI Bl] /proc/{fs,sys}/{lnet, lustre} FINIIA). letl set_param命令使用以下语法:lctl Set Param [-n] [-P] [-d] obdtype.obdname.property—value如:mds# lctl set Param mdt.testfs-MDTO000.identity upcal1l=NONE(在 Lustre 2.5 中引入)使用 -P 选项设置永久参数，使用 -q选项删除永久参数。例如: mgs# 1ct1set param -P mdt.testfs-MDT0000.identity upcall=NONE mgs# lctlset param -P -d mdt.testfs-MDT0000.identity upcall很多参数也可通过 lctl conf param进行永久设置。1Lct1l conf param 通常可用于指定任何在文件/Proc/fs/lLIustre可设置的OBD",
        "d mdt.testfs-MDT0000.identity upcall很多参数也可通过 lctl conf param进行永久设置。1Lct1l conf param 通常可用于指定任何在文件/Proc/fs/lLIustre可设置的OBD 设备参数。1Lct1conf_param 命令必须在 MGS 节点上运行，并使用以下语法:obd|fsname.cbdtype.property=value)如:mgs# lctl conf param testfs-MDT0000.mdt.identity upcall=NONE$ lctl conf param testfs.llite.max read_ahead_mb=16注意lctl conf_param 命令可在文件系统配置中为指定类型的所有节点设置永久参要获取当前 Lustre 参数设置，请在相应节点上使用LIct1 get param命令，其数名称与1ct1 set_param中使用的相同:Wwlctl get param [-n] obdtype.cobdname.parameter556\n———Lustre 文件系统操作手册ay如:mds# lctl get Param mdt.testfs-+MDT0000.identity upcall使用 lctl list param 命令列出所有可设置的 Lustre 参数:lctl list param [-R] [-F] obdtype.obdname. *oss# lctl list param -RE mdt网络配置选项例如，列出MDT 上的所有参数:说明局动或关闭 LNet; 为其他LIct1l LNet 命令选择网络类型 。打印本地和点上的所有 NID。必须运行 LNet。从远程节点的NID 列表中，标识出将发生接口通信的 NID.network up|down|tcp/elanlist _nidswhich nid nidlistping nidinterface listpeer listconn listactive txroute list设备选择选项 说明通过 LNet ping 检查 LNet fe, KALE打印给定网络类型的网络接口信息。打印给定网络类型的对端节点信息。合指定 NID YZ打印给定网络类型的所有已连接的远端 NID。打印活动传输，仅适用于 Elan 网络。打印完整的路由表。device devname 选择指定的OBD 设备。所有其他命令以此命令所设置的设备为基础。device list 显示本地 Lustre OBD, a/k/a dl.设备操作选项 说明list param [-F",
        "参数将映射#/proc/{fs,sys}/{linet, LIusttre}中的条目。lctl set param 命令使用以下语法:lctl Set Param -Pobdtype.obdname.proc file name=value如:# lctl set param -P osc.*.max dirty mb=1024osc.myth-OST0000-osc.max dirty mb=32osc.myth-OST0001-osc.max dirty mb=32osc.myth-OST0002-osc.max dirty mb=32132\nNn—234———ULD——Lustre 文件系统操作手册 译者:这ayosc.myth-OST0003-osc.max dirty mb=32osc.myth-OST0004-osc.max dirty mb=32用 -d (只市 -P) 删除永久参数，语法为:lctl Set Param -P -dobdtype.obdname.proc file name如:# Ictl set param -P -d osc.*.max dirty mb13.11.3.4，列出当前参数 列出所有 Lustre 或 LNet 可设置参数，运行 lct1llist param 命令:lctl list param [-FR]obdtype.obdname以下参数可用于 lctl list param 命令:-F, APPLE 8@ ,=' 分别用于表示目录，符号链接，可写文件。-R ，递归方式列出某路径下的所有文件。On:oss# lctl list param obdfilter.lustre-OST000013.11.3.5. 报告当前参数值 FA lctl get param 命令报告当前 Lustre 参数值的语法为:lcetl get param [-n]obdtype.obdname.proc file name以下示例显示了 RPC 持续服务时间 :oss# lctl get Param -n ost.*.ost_io.timeoutsservice : cur 1 worst 30 (at 1257150393, 85d23h58m54s ago) 1111以下示例报告了在该客户端上每个 OST 用于写回绥存的预留空间 :client# lctl get param osc.*.cur Grant Dytesosc.myth-OST0000-osc-ff£ff£8800376bdc00.cur_ grant bytes=2097152133\n—",
        "节点上的临时参数。这些参数将映射至/proc/{ffsvsys}/{lnet, LIustre}l。语法如下:lctl Set Param [-n] [-P]obdtype.obdname.proc file name=value如:# lctl set param osc.x .max dirty mb=1024osc.myth-OST0000-osc.max dirty mb=32osc.myth-OST0001-osc.max dirty mb=32osc.myth-OST0002-osc.max dirty mb=32131\nNn—234——ULDNn—ULDLustre 文件系统操作手册 译者:这ayosc.myth-OST0003-osc.max dirty mb=32osc.myth-OST0004-osc.max dirty mb=3213.11.3.2. 设置永久参数 Ictl conf param 用于设置永久参数。一般来说，1Lct1conf param 可用于设置 /proc/fs/lustre 文件中所有可设置参数，话法如下 :obdname|fsname.obdtype.proc file name=value)以下是 lctl conf param 命令的一些示例:mgs# lctl conf param testfs-MDT0000.sys.timeout=40$ lctl conf param testfis-MDT0000.mdt.identity upcall=NONE$ lctl conf param testfs.llite.max read_ahead_mb=16$ lctl conf param testfs-MDT0000.lov.stripesize=2M$ lctl conf param testfs-OST0000.osc.max dirty mb=29.15$ lctl conf param testfs-OST0000.ost.client cache _seconds=15$ lctl conf param testfs.sys.timeout=40注意通过1ct1 conf_param 售令设置的参数是永久性的，它们被写入了位于 MGS 的文件系统配置文件中。13.11.3.3. 用 Ictl set param -P 设置永久参数 Kis > 4 Mm 7 MGS 上的行。通过lct1l upcal1在每个主机上设置给定参数。这些参数将映射#/proc/{fs,sys}/{linet, LIusttre}中的条目。lctl set param 命令使用以下语法:lctl Set Param -Pobdtype.obdname.proc file name",
        "inodesyblock。13.11. 设置及查看 Lustre 参数以下选项可用于在 Lustre 中设置参数:。创建文件系统，请使用 mkfs.lustre。© 当服务吉停止运行时，请使用 tunefs.lustre。。当文件系统正在运行时，可用lcd来设置或奋看 Lustre 参数。13.11.1. 用mkfs . Lustre设置可调试参数当文件系统第一次进行格式化时，参数可通过在mkfs.lustre 命令中添加--param 选项进行设置，如:130\n—————ULDNn—ULDLustre 文件系统操作手册%ty这aymds# mkfs.lustre --mdt --param=\"sys.timeout=50\" /dev/sda13.11.2. 用tunefs .Lustre设置参数“AK at (OSS 或 MDS) 停止运行时，可通过 tunefs.lustre 命令及 --Param选项添加参数至现有文件系统，如:oss# tunefs.lustre --paran=-failover.node=192.168.0.13@tcp0 /dev/sdatunefs.lustre 命令诬加的为附加参数，即在已有参数的基础上诡加新的参数，而不是蔡代它们。探除所有的已有参数并使用新的参数，运行:mds# tunefs.lustre --erase-params --param=new parameterstunefs .Lustre可用于设置任何在 /proc/fs/lustre 文件中可设置的具有 OBD 设备的参数，可指定为 obdname|fsname. obdtype.proc file name= value。如:mds# tunefs.lustre --param mdt.identity upcall=NONE /dev/sdal13.11.3. 用 Lct1设置参数当文件系统运行时，1lctl 可用于设置参数 (临时或永久) 或报告当前参数值。临时参数在服务僚或客尸端未关闭时处于激活状态，永和久参数在服务胡和客户端重司后仍不注意Lotl list_param 可列出所有可设置参数。13.11.3.1. 设置临时参数 1ctl set_param 用于设置在当前运行节点上的临时参数。这些参数将映射至/proc/{ffsvsys}/{lnet, LIustre}l。语法如下:lctl Set Param [-n] [-P]obdtype.obdname.proc",
        ", 'c' },一一\"Prlorlty\"，1，NULTI 'p' },一一\"help\", 0, NULL, 'h' },一一NULL, O, NULL, O },while ((opt = getopt long(argc, argv, short options,long options, NULL)) !=~-1) {Switch (opt) {case 'n':network = optarg;break;case 'g!':gateway = optarg;break;case 'c':rc = parse long(optarg, shop);if (rc !=0) {/* ignore option */hop = -1;continue;}break;case 'p!':rc = parse long(optarg, &prio) ;if (rc '=0) {/* ingore option */604\nLustre 文件系统操作手册 译者:这ay404142434445464748495051525354555657585960 }prio =-l;continue;}break;case 'h':print help(route_cmds, \"route\", \"add\");return 0;default:return 0;rc = lustre Inet config route(network, gateway, hop, prio, -l, serr rc);if (rc != LUSTRE CFG RC _NO ERR)CYAML print tree2file(stderr, err rc);cYAML free tree(err rc);return rc;其他代码示例请参照:1 lnet/utils/lnetctl.c605"
    ]
}