{
    "query": "请说明Lustre软件安装程序的流程。",
    "summaries": [
        "本文档介绍了Lustre软件系统的安装准备和需求，包括使用RPM包安装Lustre软件的步骤。需要的软件包包括服务器和客户端软件包，以及相关的内核模块和工具。环境要求包括所有客户端使用相同的用户ID和组ID、时钟同步、以及确保安全扩展和网络工具不影响Lustre运行。安装前需备份数据，并按照步骤从Lustre Releases目录下载适用的RPM包。",
        "该文本描述了Lustre文件系统的安装与配置过程，包括二进制文件的解压、模块加载、编译安装及挂载操作。同时涉及MPICH的部署和用户管理程序的安装，包含创建系统账户、安装相关服务及启用服务的步骤。整个过程需在root权限下执行，并注意部分服务的适配性问题，使用预编译二进制文件进行安装。",
        "本文档为Lustre文件系统操作手册，主要内容包括：安装Lustre客户端软件包、升级Lustre版本的步骤、格式化MDT和OST、配置配额功能、挂载Lustre文件系统组件以及滚动升级方法。需确保内核版本与客户端模块一致，升级前需备份数据，使用yum安装RPM包，并按顺序挂载MGT、MDT、OST和客户端。同时，支持文件条带化和项目配额功能，需注意兼容性问题。"
    ],
    "contents": [
        "install pkgl.rpm pkg2.rpm ...C. WRU TE Le IE WER |rpm -gqalegrep \"lustre|wc\"d. 在每个 Lustre IRA at EAE EER.7. 从Lustre Releases目录中下载适用于您平台的 Lustre 2 ti RPM.注意客户端运行的内核版本必须与所安装的Iusttre-client-moqules-vet软件包版本一致。否则，在 Lustre 客户端软件包安闭前，必须安效兼容的内核版本。173\nLustre 文件系统操作手册 译者:这ay8. 在每个待升级的 Lustre 客户器上安冯 Lustre 客户端软件包。a，使用root用户登录 Lustre 客户端。b. 使用yum命令安装所有软件包:# yum --nogpgcheck install pkgl.rpm pkg2.rpm ...C. WRU TE Le IE WER |# rpm -galegrep \"lustre|kernel\"d. 在每个 Lustre 客户端上重复以上步骤。9. Lustre 允许对一个文件进行条带化，最多 2000 个 OST。在 Lustre 2.13 版本之前，”“宽条带化\" 功能允许创建 160 条以上的文件，黑认情况下不启用该功能。从 2.13版本开始，新格式化的 MDTs 启用了ea_inode功能。也可以通过 tune2f 命令在现有的 MDT 上启用该功能:mds# tune2fs -O ea inode /dev/mdtdev10. (Aye) 格式化附加的 MDT，请完成以下步骤:a. 确定首个 MDT 所用索引 (每个MDT 有一个唯一的索引) ，输入:1 client$S lctl dl | grep mdc2 36 UP mdc lustre-MDT0000-mdc-fff£88004edF3c003 4c8be054-144£-9359-b063-847756¢eb84e 5在这个例子中，下一个可用索引为 1。b. 在下一个可用索引处添加新的块设备作为新的MDT，输入:1 mds# mkfs.lustre --reformat --fsname=filesystem name --mdt \\2 —-mgsnode=ngsnode --index 13 /dev/mdtl_ device11. 《",
        "- Lustre 客户端软件包。下表中列出了 Lustre2.9 EL7 客户端所需软件包，其中，verLinux 发行版本 (如 3.6.18-348.1.1.e15)些安装包可在 Lustre Releases 目录中71\nLustre 文件系统操作手册 译者:这aysHe78大人 。CSXK软件包 说明kmod-lustre-client-ver.arch 客户端的无损内核模块lustre-client-ver.arch Be FA itis 47 TE.lustre-client-dkms-ver.arch kmod-lustre-client 的替代客户端了RPM，含动态内核模块文择 (DKMS) 。避免了每次内核更新都安疾新的RPM，但需要和客户端的完整构建环境。注意除非安装了 DKMS 软件包，否则在 Lustre 客户端上运行的内核版本必须与正在安AY kmoq-lustre-client-vez软件包版本相同。如采在客户端上运行的内核不兼容，则在使用 Lustre 文件系统软件乙前，必须在客户端上安装兼容的内核。。Lustre LNet 网络驱动器 (LND). 下表列出了 Lustre 软件提供的 LNDs。文持的网络类型 ”说明TCP 任何带 TCP 流量的网络，包括 GigE, 10GigE, IPoIB.InfiniBand network OpenFabrics OFED (021b)gni Gemini (Cray)注意在发行周期中，IfiniBand 和 TCP Lustre LND 会经名性地被测试，其他 LND 则由各目所有者进行维护。。 高可用性软件。如必要的话，可安装第三方高可用性软件。> WKH. Lustre Releases 目录中所提供的可选软件包有 〈不同的操作系统和平台) :。 kernel-debuginfo, kernel-debuginfo-common, lustre-debuginfo,lustre-osd-ldiskfs-debuginfo ------所需软件包的调试符号和选项，用作故隐发现和解决。\" kernel-devel ------4i#55 = 77H CUI ZAR) 所需的内核树部分72\nLustre 文件系统操作手册 译者: 李硕。 kernel-firmware ------针对 Lustre 内核重新编译的 Standard Red Hat EnterpriseLinux distribution 。* kernel-headers ------在/useVinclude 下的头文件，用于编译用户空间和内核相天代码。。 lustre-source ------Lustre",
        "-xhf u20_lustre-2.14.0-MLNX-5.2-1.0.4.0.arm64.bin.tar.bz2 -C /\nroot@ln0:~# depmod -a\nroot@ln0:~# vim /etc/modprobe.d/lustre.conf\noptions lnet networks=o2ib(ib0)\n以上部分为编译并打包的二进制文件，若存在重新编译需求\n源码编译并安装：\nroot@ln0:~# cd /home/test651/software/src/\nroot@ln0:~# tar –xf lustre-2.14.0.tar.gz\nroot@ln0:~# cd lustre-2.14.0\nroot@ln0:~# patch -p1 < /path/to/Lustre-2.14.0-ubuntu-20.04.2-stacktrace.patch\nroot@ln0:~# apt-get install libyaml-dev zlib1g-dev\nroot@ln0:~# ./configure --prefix=/usr --libdir=/usr/lib --disable-server --with-o2ib=/usr/src/ofa_kernel/default\nroot@ln0:~# make -j 60\nroot@ln0:~# make install\nroot@ln0:~# depmod -a\nroot@ln0:~# vim /etc/modprobe.d/lustre.conf\noptions lnet networks=o2ib(ib0)\n如果Lustre server正常，即可挂载文件系统\nroot@ln0:~# mount –t lustre –o localflock xx.xx.xx.xx@tcp1:/XXFS /vol8\n2.4.17 部署mpich\nroot@ln0:~# cd /home/test651/software/bin/\nroot@ln0:~# tar -xhf u20_mpi_all.arm64.bin.tar.bz2 -C /\n提供了多个mpi版本\nroot@ln0:~# ls -l /usr/local/\n/usr/local/mpi-x\n/usr/local/mpi-x-dbg\n/usr/local/mpi-x-pmi2\n/usr/local/mpi3-shared\n/usr/local/mpi3-static\n/usr",
        "usr/local/mpi-x\n/usr/local/mpi-x-dbg\n/usr/local/mpi-x-pmi2\n/usr/local/mpi3-shared\n/usr/local/mpi3-static\n/usr/local/ompi\n2.4.18 安装用户管理程序\n安装过程中，会显示menu界面，此处全部选择默认值即可，不要按下Esc键取消\nroot@ln0:~# apt-get -y install nscd nslcd ecryptfs-utils\nroot@ln0:~# systemctl stop nscd\nroot@ln0:~# systemctl stop nslcd\n手动创建用户管理程序需要账户信息\nroot@ln0:~# getent group nscd > /dev/null || /usr/sbin/groupadd -r -g 28 nscd\nroot@ln0:~# getent passwd nscd > /dev/null || /usr/sbin/useradd -r -g nscd -u 28 -d / -s /usr/sbin/nologin nscd 2> /dev/null || :\nroot@ln0:~# getent group ldap > /dev/null || /usr/sbin/groupadd -r -g 55 ldap\nroot@ln0:~# getent passwd ldap > /dev/null || /usr/sbin/useradd -r -g ldap -u 55 -d /var/lib/ldap -s /usr/sbin/nologin ldap 2> /dev/null || :\n安装用户管理软件，因该程序在ubuntu安装适配性不良，已编译二进制文件，直接覆盖解压安装\nroot@ln0:~# tar -xhf u20_lam-yhpc.tar.bz2 -C /\nroot@ln0:~# tar -xhf u20_nss-yhpc.tar.bz2 -C /\n启用服务，验证普通用户登录\nroot@ln0:~# systemctl start nslcd\nroot@ln0:~# systemctl start nscd\nroot@ln0:~# systemctl enable nslcd\nroot@ln0:",
        "x.y，可使用滚动升级，即可在 Lustre 文件系统运行时，挨个升级每个服务右 〈或其故障切换节点) 和客户端。要将 Lustre2.x.y 升级到更新的次要版本，请完成以下步骤:1. 创建一个完整的、可恢复的文件系统备份。注意在安装 Lustre 软件之前，请备份所有数据。Lustre 软件所包含的内核更新将作用在存储设备上，如果未正确安装、配置或管理，可能会导致安全问题和数据丢失。如果无法实现文件系统的完整备份，建议和您使用MDT 文件系统的设备级备份。2. 从 Lustre Releases目录中下载适用于您平台的 Lustre 服务器 RPMs.3. 在滨动升级中，服务需进行脱机升级，保持 Lustre 文件系统运行，并完成所需的PRE, WEAR aie WPS Et IRF oe EE4. HEFL Lustre 服务器 (MGS, MDS, OSS) 。5. 在 Lustre 服务逢上安装 Lustre 服务机软件包。a. 使用 root} PF tae Lustre IRI ©b. 使用 yum 命令安装所有软件包:# yum --nogpgcheck install pkgl.rpm pkg2.rpm ...C. WRU TE Le IE WER |rpm -gqalegrep \"lustre|wc\"d. 挂载 Lustre IRs, 7ENRS a$_ LEA Lustre 软件:server# mount -a -t lustree. 在每个 Lustre Ika LHS EAR:6. 从 Lustre Releases目录中下载适用于您平台的 Lustre 客户端RPMs。7. 在每个竺升级的 Lustre 客户端上安装 Lustre 客户端软件包。a. 使用 root HPs Lustre 客户端。b. 使用 yum 命令安装所有软件包:170\nLustre 文件系统操作手册 译者:这aX# yum --nogpgcheck install pkgl.rpm pkg2.rpm ...C. WRU TE Le IE WER |# rpm -galegrep \"lustre|kernel\"d. 挂载 Lustre IRs, 7ENRS a$_ LEA Lustre 软件:client#",
        "MDT，输入:1 mds# mkfs.lustre --reformat --fsname=filesystem name --mdt \\2 —-mgsnode=ngsnode --index 13 /dev/mdtl_ device11. 《可选) 升级到 Lustre 2.10 之前的版本时，司用 project 配额功能，请在每个 ldiskfs后端目标上输入:1 tune2fs -O project /dev/dev174\nLustre 文件系统操作手册 译者:这ay—N—————注意司用project 功能将阻止文件系统使用旧版本的 ldiskfs，因此请在确实需要项目配售功能或文件系统不需要再降级的情况下局用该功能配置文件系统，请输入:conf param $FSNAME.quota.mdt=SQUOTA TYPEconf param $FSNAME.quota.ost=SQUOTA TYPE. FEAR PIU ah Lustre 文件系统的各组件:a. 挂载 MGT，在 MGS 运行:mgs# mount -a -t lustreb. 挂载 MDT，在每个 MDT 运行:mds# mount -a -t lustrec. 挂载所有 OSTs ，在每个 OSS TI ISTT:oss# mount -a -t lustre注意该命令假设/etc/fstab文件列出了所有的 OST。没有在/etc/fstab文件中列出的 OST 必须另外使用以下命令进行挂载:mount -t lustre /dev/block device/mount pointd. 在客户端上加载文件系统，请在每个客户端上运行:client# mount -a -t lustre注意文件系统进行首次加载和升级后的首次注册时必须遵循上述步骤中的所质述的挂载顺序。对于 Lustre 文件系统的普通司动，挂载顺序为 MGT、OST、MDT、客户端173\nLustre 文件系统操作手册 译者:这aX17.3. 升级至 Lustre Software Release 2.x.y (次版本)从任一 Lustre 2.x.y 升级到更新的 Lustre 2.x.y，可使用滚动升级，即可在 Lustre 文件系统运行时，挨个升级每个服务右 〈或其故障切换节点) 和客户端。要将 Lustre2.x.y 升级到更新的次要版本",
        "Lustre 内核重新编译的 Standard Red Hat EnterpriseLinux distribution 。* kernel-headers ------在/useVinclude 下的头文件，用于编译用户空间和内核相天代码。。 lustre-source ------Lustre 软件源代三(推荐) perf, perf-debuginfo, python-perf, python-perf-debuginfo—配合 Lustre 内核版本编译过的 Linux 性能分析工具。8.1.2. 环境要求fees Lustre 软件之前，请确保符合以下环境要求:(必要) 在所有客户端上使用相同的用户 IDs(UID)和组 IDs(GID) 。如果需要使用补充组，请参见了解有关补充用户和组绥存 upcall WAZ (identity upcall).CGE) 为客户提供远程 shel 访问。建议赋予所有集群节点远程 shell 客户端访问权限，以更好地利用 Lustre 配置和监视脚本。推荐使用并行分布式SHELL (pdsh) ,也可使用 Secure SHell (SSH).(推荐) 确保客户端时钟同步。 Lustre 文件系统使用客户端时钟作为时间戳。如末客户问之间的时钟不同步，则不同客户端访问时，文件将显示不同的时间戳。时钟漂移也可能导致问题，例如，难以调试多市氮问题及关联日志等依赖于时间戳的事件。我们建议您使用网络时间协议 CONTR) 保持客户端和服务器时钟同步。有关 NTP 的更多信息，请参阅: http:/www.ntp.org.(推荐) 确保安全扩展 (如 Novell AppArmor * 安全系统) 和网络包过滤工具不会二扰 Lustre 正常运行。8.2.Lustre 软件安装程序注意安装 Lustre 软件前，请备份所有数据。Lustre 软件包含须与存储设备交互的内核更新，如果软件未正确安装、配置或管理，可能会导致安全问题和数据丢失。安装 Lustre 软件，请参照以下步骤:1. 核实是和否满足 Lustre 安效需求，包括硬件需求及软件需求。2. 从 Lustre Releases目录下载适用于您平台的e2fsprogs RPMs.3. 从 Lustre Releases目录下载适用于您平台的 Lustre [R445 RPMs.4. 在所有 Lustre IRF az (MGS, MDSs",
        ".org/collaborate/workgroups/networking/bonding. 4% #7! #E看，该文档扩展度很高，包合很多更复杂的设置的详细说明，包括用 DHCP进行绑定。第八章 Lustre 软件系统安装8.1. 安装准备您可以使用下载的软件包 (RPM) 安装，或直接从源代但安朔 Lustre 软件。本章主要介绍如何安装 Lustre RPM 软件包。Lustre RPM 软件包在创建时在 Linux enterprise 的各种当前版本上进行了测试。70\nLustre 文件系统操作手册 ER Ar8.1.1. 软件需求使用RPM 安装 Lustre 软件，需要以下安装包。Lustre 服务器软件包。 下表中列出了 Lustre2.9 EL7 服务器所需软件包，其中，yverLustre 和| kernel 发行版本 (如 2.9.0-1.e17) , arch 指处理帆架构 (e.g., x86 64)些安装包可在 Lustre Releases 目录中获得。软件包kernel-ver lustre.arch说明lustre-ver.archkmod-lustre-ver.archty Lustre 补丁的 Linux 内核(patched kernel)Lustre 软件命令行工具kmod-lustre-osd-ldiskfs-ver.archLustre 补丁内核模块lustre-osd-ldiskfs-mount-ver.arch用于基于 ldiskfs 的服务器的 Lustre 后端文件系统工具kmod-lustre-osd-zfs-ver.arch基于 Idiskfs 的服务器的mount .Lustre和mkfs .1Lustre相关帮助文档用于 ZFS 的 Lustre 后端文件系统工具(A) AFA lustre-osd-ldiskfs ，lustre-osd-zfs-mount-ver.arch可分别获取 kmod-spl 和 kmod-zfsavailable )基于 ZFS 的服务需中 mount .Lustre和mkfs.1ustre相关帮助文档(ZFC 工具须另外下载)e2fsprogslustre-tests-ver lustre. archLustre Idiskfs 后端文件系统维护工具用于运行 Lustre 回归测试的脚本和种但可能只口W/.ANat4有 Lustre 开发者或测试人员感iv- Lustre 客户端软件包。下表中列出了 Lustre2.9 EL7 客户端所需软件包，其中，verLinux 发行版本 (如 3.6.18-348.1.1.e15)些安装包可在 Lustre Releases 目录"
    ]
}