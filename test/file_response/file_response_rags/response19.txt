{
    "query": " Lustre 支持哪些认证方式保障数据访问安全？Kerberos 如何配置？",
    "summaries": [
        "Lustre 文件系统通过SSK安全保护机制提供RPC完整性、隐私性和批量RPC的安全性。管理员可通过配置规则定义不同网络和方向的安全特性，例如使用`lctl conf param`命令设置特定网络的加密方式。密钥文件包含版本、类型、算法等属性，用于验证连接并确保安全性。密钥文件需安全存储，避免被全局写入。规则可动态生效，影响现有和新连接。",
        "Lustre 是一个高性能、可扩展的分布式文件系统，支持 POSIX 标准，具备高可用性、数据完整性及多种网络协议。它利用 ZFS 实现存储可靠性，支持 RDMA 等高速网络，提供原子操作和数据校验以确保一致性。Lustre 支持细粒度元数据锁定、多 MDT/OST 扩展、配额管理、文件布局控制及灾难恢复工具。其组件包括 MGS、MDS、MDT 和 OSS，支持 NFS/CIFS 导出，并基于开源 GPL 2.0 许可。",
        "Lustre 文件系统操作手册摘要：介绍了如何将密钥文件加载到内核密钥环中，可通过 `lgss_sk` 工具或挂载时使用 `skpath` 选项。密钥文件需权限正确，确保可被加载。Lustre GSS 密钥环通过 `lgss_keyring` 处理内核到用户空间的回调，需配置 `/etc/request-key.d/lgssc.conf` 文件。服务器端使用 `lsvcgssd` 守护进程处理安全特性，如 Kerberos 或 gssnull。所有密钥使用 `user` 类型并附加到用户密钥环，不可配置。提供了密钥描述格式及密钥管理示例。"
    ],
    "contents": [
        "非 MGS 连接都必须经过认证。。 LNet 网络tcp0上的 PHRPC 流量必须加密。。LNet 网络tcp1和o2ib0是高性能的本地物理安全网络，位于其上的 PHRPC 流量不需要加密。1. 确保所有非 MGS 连接在默认情况下都经过号份验证和加密。mgs# lctl conf param testfs.srpc.flavor.default=skpi2. 在 LNet J 4htcp1Alo2ib0_E 1 ae Re PEska il te OVE ARAN PTEska teft 5 AME, (ABATE Hear A at RPC 完整性。1 mgs# lctl conf param testfs.srpc.flavor.tcpl=ska2 mgs# lctl conf param testfs.srpc.flavor.o2ib0=ska注意Hay, \"lctl set param -P\" 格式和sptirpc 不兼容。29.2.1.2. 列出规则 查看 RPC 安全配置规则，请输入:1 mgs# lctl get param mgs.*.live.testfs23 Secure RPC Config Rules:4 testfs.srpc.flavor.tcp.cli2mdt=skp15 testfs.srpc.flavor.tcp.cli2ost=skpi6 testfs.srpc.flavor.o2ib=ski729.2.1.3. 删除规则 ”使用conf param -d 命令删除某 LNet 网络的安全特性 :Min, HIBR testfs.srpc.flavor.o21ip1=ski规则，输入:1 mgs# lctl conf param -d testfs.srpc.flavor.o2ibl29.3. SSK 密钥文件SSK 窗钥文件是一组属性的集合，由管理员分发给各客户端和服务融节损。这些属性被格式化为固定长度值并存储在文件中，它们包括:。 Version - 密钥文件模式版本号。非用户定义。320\nLustre 文件系统操作手册%ty这ayType - 表示密钥文件使用者的 Lustre 角色，为强制属性。有效的密钥类型有:mgs- MGS，当使用mgssec 和mount .Lusttre 选项时。server - MDS 或 0SS 服务器。client - 客户端及在客户端环境中与其他服务需进行通信的服务锅〈如与 OST 通信Hy MDS",
        "李硕“字闻粒度文件和细粒度元数据锁定: 许多客户端可以同时读取和修改相同的文件或目录。Lustre 分布式锁管理种 (LDLM) 确保了文件系统中所有客户端和服务融之间的文件是一致的。其中，MDT 锁管理带负责管理node 权限和路径名锁。个OST 都有其目己的锁管理釉，用于锁定存储在其上的文件条带，其性能与文件系统大小相关。“配额: 用户和组配额可用于 Lustre 文件系统。“容量增长: 通过向群集添加新的 OST 和 MDT，可以不中断地增加 Lustre 文件系统的大小和集群总惠宽。“受控文件布局: 可以在每个文件，每个目录或每个文件系统基础上配置跨 OST 的文件布局。这人允许了在单个文件系统中调整文件 IO 以适应特定的应用程序要求。Lustre 文件系统使用RAID-0 进行条带化并可在 OST 之间调和空间使用大小。。网络数据完整性保护: 从客户端发送到 OSS 的所有数据的校验和可防止数据在传输期间被损坏。”MPII/O: Lustre 架构具有专用的 MPI ADIO 层，优化了并行 VO 以匹配基础文件RRR> NFS 和 CIFS 导出: 可以使用NFS (通过 Linux knfsd 或 Ganesha) 或 CIFS(通过 Samba) 将 Lustre 文件重新导出，使其可以与非 Linux 客户端 〈如Microsoft*Windows 和 *Apple *Mac OS X *) 共享。\"灾难恢复工具: Lustre 文件系统提供在线分布式文件系统检查 〈LFSCK) ，当发生主要文件系统错误的情况下恢复存储组件乙间的一致性。Lustre 文件系统在存在文件系统不一致的情况下也可以运行，而 LFSCK 可以在文件系统正在使用时运行，因此 LFSCK 不需要在文件系统恢复生产之前完成。。 性能监视: Lustre 文件系统提供了多种机制来检查性能和进行调整。。开放源代码: Lustre 软件已获得在 Linux 操作系统上运行的 GPL 2.0 许可证。1.2. Lustre 组件Lustre 软件的安装包括管理服务器 (MGS) 和一个或多个与 Lustre 网络 (LNet)",
        "keyring %o %k st sd Sc %uOOT SP 3Srequest-key 二进制将调用 lgss_keyring ，请使用相应的值代入随后的参数。OOXe)OOOO331\nLustre 文件系统操作手册 译者:As大29.4.2. 服务器设置Lustre 服务器不像客户端那样使用 Linux request-key 机制，而是运行守护进程。该守护进程使用 pipef 来触发基于文件摘述符读写操作的事件。服务磺端的二进制文件是lsvcgssd ，它可以在前台或作为守护进程执行。以下是1svcgssdq的参数，它需要明确司用各种安全特性 (gssnul1，krb5，sKk)。这将确保仅启用所需的功能。Table 3. lsvcgssd 参数—n 不建立 Kerberos 凭证-v 详细版一Im MDS 45-48—O OSS HRA at“J MGS 服务硕-k 司用 Kerberos-s 局用共享密铀-Z JAAN gssnull安装 SysV FESUAY MINA ASK a SUF Ik svcgssdsF4Pithe. MUR ACK Rr查/etc/sysconfig/Llsvcgss配置文件中的LSVCGSSARGS变量用作启动参数。通过内核密钥环中的每个密钥的特定摘述碍找客户端的回调期间以及服务需处理RPC 期间的密铀。每个MGS NID 必须加载一个单独的密钥。密钥描述的格式如下表所示:Table 4. 密钥描述类型 密钥描述 示例MGC lustre: MGCNID lustre:MGC192.168.1.10@tcpMDC/OSC/OSP/LWP _ lustre:/sname lustre:testfsMDT lustre:/sname:NodemapName lustre:testfs:biologyOST lustre:/sname:NodemapName lustre:testfs:biologyMGS lustre:MGS lustre:MGS332\n—KR WwWOo101—12131415161718192021222324252627282930313233Lustre 文件系统操作手册 译者:Lustre 的所有密钼都使用 user 的密钥类型，并被附加到用户的密钥环中。这是不可配置的。以下示例显示了如何列出用户的密钥环、加载密钥文件、读取密钥，以及从内核密钥环中清除密铀。client# keyctl showSession Keyring17053352 --alswrv 0 0 keyring: _ses773000099 --alswrv 0 65534 \\_ keyring: _uid.0client# lgss_ sk -l1 /",
        "已获得在 Linux 操作系统上运行的 GPL 2.0 许可证。1.2. Lustre 组件Lustre 软件的安装包括管理服务器 (MGS) 和一个或多个与 Lustre 网络 (LNet) 互连的 Lustre 文件系统。Lustre 文件系统组件的基本配置如下图所示:34\nLustre 文件系统操作手册ayManagement Server (MGS) Management Target MGT}Metadata Server (MDS) Metadata Target (MILT }© Sy Co-located MS and MDS share storageLustre clientsEn Ethermet or InfiniBand Network © ®oss 1©. 8Object Storage Servers(OSSs}图 1: Lustre component1.2.1. 管理服务器 (MGS)MGS 存储集群中所有 Lustre 文件系统的配置信息，并将此信息提供给其他 Lustre组件。每个 Lustre target 通过联系 MGS 提供信息，而 Lustre 客户通过联系 MGS 获取信起Ju OMGS 最好有目己的存储空间，以便可以独立管理。但同时，MGS 可以与 MDS 共址并共享存储空间，如上图中所示。1.2.2 Lustre 文件系统组件每个 Lustre 文件系统由以下组件组成:“元数据服务器 (MDS) - MDS 使存储在一个或多个 MDT 中的元数据可供 Lustre客户器使用。每个 MDS 管理 Lustre 文件系统中的名称和目录，并为一个或多个本地 MDT 提供网络请求处理。“元数据目标 (MDT) - 每个文件系统至少有一个MDT。MDT 在 MDS 的附加存储上存储元数据〈例如文件名，上目录，权限和文件布局)。虽然共享存储目标上的MDT 可用于多个 MDS，但一次只能有一个 MDS 可以访问。如采当前 MDS 发生web, Wl A MDS 可以为MDT 提供服务，并将其提供给客户中。这被称为MDS故障切换。分布式命名空间环境 (DNE) 可文持多个 MDT。除保存文件系统根目录的主 MDT之外，还可以添加其他 MDS “it, fs MDS “aA AY MDT 来保存文件系统的子目录树。35\nLustre 文件系统操作手册 eke",
        ":这ayPR Pet TBR ES ATE IITTable 1. SSK 安全保护需要载入文件系统 是 是 是 是提供 RPC 完整性 Gf 是 是 是提供 RPC 隐私性 Gf Ff f 是提供批量 RPC 完整性 FT OF 是 是提供批量 RPC 隐私性 fT fF FTO有效的非 GSS 特性包括 :null -无保护，为默认值。plain -在每个RPC 上使用哈希列表的明文。29.2.1. RPC 安全规则使用1ct1命令将 RPC 安全配置规则写入 Lustre 日志 (llog)。规则通过 Mog 进行处理，它规定了用于特定 Lustre 网络或方向的安全特性。注意规则只需几秘钟即可生效，将影响现有连接和新建连接。规则格式: target.srpce.flavor.network{.direction|=flavortarget - 可为文件系统名或特定 MDT/OST 设备名。network - RPC 启动程序的LNet 网络名。如: tcpl 或o2ib0。如没有指定特定网络，该值也可为关键字qefault，以指代所有网络。direction - 可选。可为mdat2mdt、mqt2ost、clLi2mat或cl1i2ost中的一个。注意要确保与 MGS 的安全连接，请使用mgssec = flavor 的挂载选项。这是必需的，因为发起方在 MGS 连接建立之前不知道安全规则。以下示例适用于名为testfs的测试用 Lustre 文件系统。29.2.1.1. 定义规则 规则可以按任何顺序定义和删除。对于给定连接，采用描述最具体的规则。fsname .srpc.flavor.dqefault规则限定的范围最广，因为它适用于文件系统内所有非 MGS 的连接。您可以根据您的需求定制 SSK 安全特性，进一步指定特定目标、网络或方向。325\nLustre 文件系统操作手册 译者:这ay以下示例给出了为三个 LNet 网络组成的环境配置 SSK 安全性的方法。需求为:。上所有非 MGS 连接都必须经过认证。。 LNet 网络tcp0上的 PHRPC 流量必须加密。。LNet 网络tcp1和o2ib0是高性能的本地物理安全网络，位于其上的 PHRPC 流量不需要加密",
        "84e3 la67 67£0 47c7 0c68 5635 £50e 9cf0 ...gg.G..hV5....0040: e622 6f53 2627 6af6 9598 eeed 6290 Sble .\"OS&'\"F.....b...0050: 2ec5 df04 884a eal2 9f24 cadc e4b6 e9ld .....J..。.S.....。0060: 362f a239 Oa6d 0141 p5e0 5c56 9145 6237 6/.9.m.A..\\V.Eb70070: 59ed 3463 90d7 Icbe 28d5 al5d 30f7 528b Y.4c....(..]0-.R.0080: 76a3 2557 e585 albe c741 2a81 Oaf0 2181 v.oW.....Arx...1!.0090: 93cc aly7a ye27 6128 5ebd e0a4 3335 ap63 ...z~'a(*%...35.c00a0: c086 8dq0dq 89cl c203 3298 2336 59d8 de7 ........2.#6Y...00b0: e52a bO0c 088f 71c3 5109 ef14 3910 fcf6 .%*....q.0...9...00c0: 0fa0 7db7 4637 bb95 75f4 eb59 bOcd 4077 ..}.F7..u..Y..@wO0d0: 8f6a 2ebd £815 a9eb 1b77 c197 5100 84cO .j.......w..Q...O0e0: 3qc0 d75d 4063 6be5 a843 75la bO9c 1620 =..)@.k..Cu....00f0: 8126 4817 e657 b004 06b6 86fb 0e08 6a53 .G&H..W........]S330\nayLustre 文件系统操作手册 译者:As大29.3.1.4. 载入密铀文件“将密钥文件加载到内核密钥环中，可使用1gss_sk工具，也可在挂载时使用skpath挂载选项。skpath方法的优点是它将接受一个目录路径并将目录中的所有密钥文件都加载到窗钥环中。而1gss_sk工具在每次调用时将单个密钥文件加载到密钥环中。密钥文件不能全局写入，否则将无法加载。如果必要的话，也可以使用第三方工具加载密钥。唯一需要注意的是，当request_key问用户空间回调时，密钥必须可用并使用正确的密钥措述，",
        "存储的后备文件系统。这使 Lustre 能够利用 ZFS 的可扩展性和数据完整性特性来实现单个存储目标。“ 符合 POSIX 标准: 完整的POSIX 测试套件以完全相同的方式传递到本地的 ext4文件系统。在集群中，大多数操作都是原子操作，因此客户端永远不会看到损坏的数据或元数据。Lustre 软件文持mmap 0 MPF I/O 操作。.高性能异构网络: Lustre 软件支持各种高性能低延迟的网络，人允许远程直接内存访问 (RDMA) 方式实现在 InfiniBand、IntelOmniPath 等高级网络上的快速高效网络传输。可使用 Lustre 路由桥接多个RDMA 网络以获得最佳性能。Lustre 软件同时也集成了网络诊断。。 高可用性: Lustre 文件系统通过OSTSs (OSS targets) 或者MDT (MDS target) 的共享存储分区实现主动/主动故隐切换。Lustre 文件系统可以与各种高可用性 CHA)管理融一起工作，以实现目动故障切换并消除了单氮故了区 (NSPF) 。这使得应用程序透明恢复成为可能。多重安逆保护 (MMP) 提供了对高可用性系统中的错误的综合保护，和否则将会导致文件系统损坏。可配置多个 MDT 的主动/主动故障切换。这人允许了通过添加 MDT 存储设备和 MDS蔬氮来扩展 Lustre 文件系统的元数据性能。\"安全性: 默认情况下，TCP 连接只人允许授权端口通过。UNIX 组成员身份在 MDS上进行验证。“访问控制列表 (ACL) 及扩展属性: Lustre 安全模型遵循 UNIX 文件系统原则，并使用POSIX ACL 进行增强。请注意一些附加功能，如 root squash.“互操作性: Lustre 文件系统运行在各种 CPU 架构和混合端群集上，并在连续发布的一些主要 Lustre 软件版本乙间具有互操作性。“基于对象的体系结构: 客户端与磁盘文件结构相互隔离，可在不影响客户端的情况下升级存储体系结构。33\nLustre 文件系统操作手册 译者: 李硕“字闻粒度文件和细粒度元数据锁定: 许多客户端可以同时读取和修改相同的文件或目录。Lustre 分布式锁管理种 (LDLM) 确保了文件系统中所有客户端和服务融之间的文件是一致",
        "。密钥文件不能全局写入，否则将无法加载。如果必要的话，也可以使用第三方工具加载密钥。唯一需要注意的是，当request_key问用户空间回调时，密钥必须可用并使用正确的密钥措述，以便在回调期间找到它 〈请参阅密钥摘述) ©例如，使用 lgss sk#kA testfis.server.biology.key 密钥文件:server# lgss_sk - testfs.server.biology.key在挂载存储目标时，使用 skpath 挂载选项载入在 /secure_directory 目录下的所有密钥文件，请输入:server# mount -t lustre -o skpath=/secure directory \\/storage/target /mount/point在客户端上使用 skpath 挂载选项将密钥文件载入密钥环:client# mount -t lustre -o skpath=/secure directory \\mgsnode:/testfs /mnt/testfs29.4. Lustre GSS 384A FfLustre GSS 密钥环二进制文件1gss_keyring被 SSK 用来处理 request-keyM内核空间回用户空间回调的操作。1lgss_keyring的目的是创建一个令牌，作为安全环境初始化RPC (SEC_CTX_INIT) 的一部分进行传递。29.4.1. 设置Lustre GSS 密钥环类特性利用 Linux 内核密钥环基础结构来维护密钥、执行从内核空间到用户空间的回调以完成密钥的协商或建立。当加载 Lustre ptlrpc_gssW%模块时，GSS 密钥环将创建一个名为1gssc的密钥类型。当必须建立安全环境时，它会创建一个密钥并使用回调中的 request-key二进制文件来建立密钥。该密钥将在/etc/request-key.dq中查找名称为 [eyppe.com 形式的配置文件，对于 Lustre 来说该配置文件为1gssc.conf。SSK 安全涉及的每个节点都必须有/etc/redquest-key.dq/1gssc.conf文件，且文件中包含以下语句:create lgssc * * /usr/sbin/lgss_ keyring %o %k st sd Sc %uOOT SP 3Srequest-key 二进制将调用 lgss_keyring ，请使用相应的值代入随后的参数。OOXe)OOOO331\nLustre 文件系统",
        "和mount .Lusttre 选项时。server - MDS 或 0SS 服务器。client - 客户端及在客户端环境中与其他服务需进行通信的服务锅〈如与 OST 通信Hy MDS).HMAC algorithm - 用于完整性的密钥哈希消息认证代码算法。有效的算法有 CRUN SHA256) :SHA256SHAS5S12Cryptographic algorithm -用于加密的密码算法。有效的算法有 (默认为 AES-256-CTR).AES-256-CTRSession security context expiration - 由密钥生成的会话环境到密钥过期须重新生成的秒数 (默认值: 604800 秒，即7 天)。Shared key length - 共享密钥长度〈以位为单位，默认值: 256)。Prime length - 用于 Diffie-Hellman 密钥交换 (DHKE) 的素数 (p) 长度 (以位为单位，默认值: 2048) 。仅用于生成客户端密钥，并可能需要一段时间。此值同时也是服务硕和 MGS 从客户端接受的最小素数长度。符试用长度小于此最小值进行连接的客户端将被拒绝。通过这种方式，服务硕可以保证最低加密级别。File system name - Lustre 文件系统名。MGS NIDs - i> [AJ BRAS MGS NID 列表。只有当使用了mgssec时才是必要的(默认值: \"\")。Nodemap name - Nodemap 名称 (默认值: default) 。Shared key - 被所有 SSK 特性共享的共享密钥，提供吴份认证。Prime (p) - 用于 Diffie-Hellman 密钥交换 (DHKE) 的素数。仅用于类型为Type=clienthy 24H.注意密钥文件提供了验证 Lustre 连接的方法，请安全地存储和传输密钥文件。密钥文件不能29.3.独加全局写入，否则将导致无法加载。1. 密铀文件管理1gss_sk 功能用于读、写、更改 SSK 密钥文件。1gss_sKk可以用来将密钥文件单载到内核密钥环中。1gss_sk选项包括 :Table 2. Igss sk 参数327\nLustre 文件系统操作手册 译者: Bar参数 值 说明-1"
    ]
}