{
    "query": " Lustre 客户端如何挂载文件系统？挂载命令格式是什么？",
    "summaries": [
        "Lustre 文件系统操作手册摘要：介绍了如何创建和挂载 Lustre 文件系统，包括使用 mkfs.lustre 命令创建 MGS、MDT 和 OST，以及通过 mount.lustre 挂载文件系统。详细说明了挂载选项，如 mgsname、block_device、安全设置、flock 选项、statfs 行为等，帮助用户优化和管理 Lustre 文件系统。",
        "Lustre 文件系统操作手册摘要：  \n本文档介绍了 Lustre 文件系统的多个工具和命令，包括 `llstat` 用于监控文件系统统计信息，`llverdev` 用于验证块设备的完整性，以及 `lshowmount` 用于显示 Lustre 导出信息。`llverdev` 可以在部分或完整模式下运行，检查设备是否存在坏扇区或访问问题。`lshowmount` 可显示挂载到服务器的客户端信息及 Lustre 服务的导出详情。此外，还提到了 `lst` 命令用于启动 LNet 自检，确保网络配置正确。这些工具帮助管理员监控、维护和诊断 Lustre 文件系统的运行状态。",
        "Lustre 文件系统名称限制为 8 个字符，文件系统和目标信息被编码到磁盘标签中，便于通过标签挂载，避免 SCSI 设备重新排序问题。标签挂载命令为 `mount -t lustre -L label /mount_point`，但不适用于多路径环境或快照场景。文件系统命名将逐步实现故障安全。启动时需按顺序挂载 MGT、MDT、OST 和客户端。关闭时需按客户端、MDT/MGT、OST 顺序卸载。使用 `/etc/fstab` 配置挂载，建议使用 `noauto` 并由高可用性程序管理。标签可通过 `e2label` 查看，格式化时应使用 `--index` 选项设置标签。注意客户端与 OSS 同节点时可能产生死锁，且不推荐在多路径环境中使用标签挂载。"
    ],
    "contents": [
        "文件系统操作于册 译者:这ay—/dev/sdal on /mnt/test/mdt type lustre (rw)N/dev/sda2 on /mnt/test/ost0O type lustre (rw)ULD192.168.0.21@tcp:/testfs on /mnt/testfs type lustre (rw)在这个例子中，MDT OST (ost0) 和文件系统 (testfs) 挂载成功。—LABEI=testf£s-MDT0000 /mnt/test/mdt lustre defaults, netdev,noauto 0 02 LABEI=testfs-OSTO0000 /mnt/test/ost0 lustre defaults, netdev,noauto 0 0通常，指定 noauto 并让高可用性 CHA) 程序包管理何时装载设备是比较明智的做法。如果您未使用故隐转移机制，请确保在挂载 Lustre 服务年之前已启动网络连接。如果您运行的是 Red Hat Enterprise Linux, SUSE Linux Enterprise Server, Debian 等操作系统〈或其他) ，请使用 这些人磁盘前网络连接已正稍局动。我们在这里通过磁盘标签进行挂载。设备的标签可以用e21abel1读取。如5emkfs. tastre AH xe-- index _— 则了刚刚格式化的 Lustre Ae 4 at HY tx SE BY以FFFF 2556, KRG ARE. IME EEN te OU DIY, ea SE之被更新。建议您始终使用--indqex 选项以确保在格式化时就完成标签设置。注意当客户端和 OSS 位于同一节点时，客户端和 OSS 乙间的内存压力可能导致死锁。注意在多路径环境中请不要使用按标签装载。13.4. 关闭文件系统若按照以下顺序全载所有客户端和服务右，Lustre 文件系统则将完全关闭。注意，凶载一个块设备只会让 Lustre 软件在该节氮上关闭。注意请注意在以下命令中 -a -t lustre 不是文件系统名, 它指代的是印载 /etc/mtab所有条目中的 lustre 类型 。1. Re ira在每个客户端节点上,运行 umount Ae SBA LEASE RSE:umount -a -t lustreDY PEER tit",
        "Lustre 文件系统操作手册这ay选项block_ device44.15.3. 选项选项mgsname=mgsnode [:mgsnode ]mgsnode=mgsnid[,mgsnid]mgssec=flavor说明在物理磁盘 block_device 上局动由mkfs. lustre (8) 命令定义的目标服务。指定block device，可使用1 label 来查找具有该标签 (如testfs-MDT0000) 的第一个块设备，或通过U uuid 选项使用UUID。如果在同一节点上存在目标文件系统的设备级备份，请格外小心。这是因为如果目标文件系统没有使用tune2fs (8)或类似命令进行更改，会产生重复的标签和 UUID 。挂载在 mountpoint 上的目标服务文件系统仅对qf (1) 操作有用，并会出现在/Proc/Vmounts中，表明该设备正在使用中。说明mgsname 是以冒号分隔的 mgsnode 名称列表，可运行 MGS 服务。如果 MGS 服务配置为 HA 故障切换模式且可能在任何一个节点上运行，则可指定多个 mgsnode 值。如果 mgsnode 有不同的LNet 接口，则每个mgsnode 通过逗号分隔的 NID 列表进行指定指定连接 MGS 的初始网络 RPC 的加密特性。砷安全的特性有: nul1，Plain和gssnul1，分别表示用于测试目的的蔡用、无加密功能或非完整性功能。Kerberos 特性有: krb5n,krb5a，krb5i和krb5p。共享密钥的风格有: skn，ska，ski和skpi。客户端到服577\nLustre 文件系统操作手册这ay选项 说明务髓连接的安全特性在客户端从 MGS 获取的文件系统配置中指定。skpath=file|directory 为此 mount 命令加载的密钥文件的文件路径或目exclude=ostlist录路径。密钥将被插入到内核的KEY SPEC SESSION KEYRING密钥环中，并附价有包含1ustre :字样及后缀的说明。该后绥取诀于 mount 命令的会话是用于 MGS，MDT/OST 还是客户问。司动客户端或MDT，指定不符试连接的已知的非活动 OST 列表〈由冒号分隔)。除了标准的 mount(8) 选项外，Lustre 还能读懂以下特定于客户端的选项:选项always pingflocklocalflock说明即使服务",
        "--offset=4096 --timestamc=1009839028 /dev/sdallverdev: /dev/sda is 4398046511104 bytes (4096.0 GB) in sizeTimestamp: 1009839028write completeread complete44.10. IlshowmountIshowmount 将显示 Lustre 导出信息。44.10.1. 梗概lshowmount [-ehlv]567\nNO 一ios)Lustre 文件系统操作手册这ay44.10.2. 说明lshowmount 实用程序将显示有 Lustre 挂载到服务器的主机，并查找 MGS. MDS 和obdfilter 的导出信息。44.10.3. 选项选项 说明-e|--enumerate 所使lshowmount 在单独一行中列出所有挂上的客户兹，而不是将客户器列表压缩为hostrange 字符串。-h|--help 打印这些命令的用法相关帮助。-1|--lookup 迫使 Ishowmount 4 4%-F oR (R IP HHHEAY NID 主机名。-v|--verbose 迫使 Ishowmount 447 AES IRA A SE a, AN EN RS it上所有 Lustre 服务的总体信息。44.10.4. 文件/proc/fs/lustre/mgs/server/exports/uuid/nid/proc/fs/lustre/mds/server/exports/uuid/nid/proc/fs/lustre/obdfilter/server/exports/uuid/nid44.11. IstIst 将启动 LNet BK.44.11.1. 梗概lst44.11.2. 说明LNet 自检可帮助站点管理员确认 Lustre Networking (LNet) 是否已正确安装和配ft, LAK LNet 及其网络软件和硬件是否按预期运行。每个 LNet 目检都在会话环境中运行。一个节氮一次只能与一个会话相关联，以确保会话独占其运行的贡氮。每个会话由从单个和点进行创建、控制和监视，即目检控制VNHoCE AAA AGES A ees a. WAT IP oP ZS BT. ROR ILEZAP HY ATT ABE BEETS 4 PKS | Fo568\nLustre 文件系统操作手册 译者: Ba测试配置通过描述和运行测试批次来进行创建。测试批次即命名的测试的集合，个测试由并行运行的多个单独的点对点测试组成。这些单独的点对点测试在被添加到测试批次时",
        "指定不符试连接的已知的非活动 OST 列表〈由冒号分隔)。除了标准的 mount(8) 选项外，Lustre 还能读懂以下特定于客户端的选项:选项always pingflocklocalflock说明即使服务从PtIzpPc模块配置了suppress_pings选项，客户端也会在空闲时定期 ping 服务器。这使得客户端即使不是外部客户端运行状况监视机制的一部分也能够可靠地使用文件系统。(在Lustre 2.9 中引入)使用flock (2) 系统调用在参与的应用程序之间启用文件锁定文持，以便文件锁定在所有使用此挂载选项的客户端节点上保持一致。这将在应用程序需要路多个客户端节点进行一致的用户空间文件锁定时非常有用，但为了保持此一致性同时也增加了通信开局用客户端本地flock(2)支持，仅使用客户端本地的文件锁定。这比使用全局flLock选项更快，并且可以用于依赖于flock (2)但仅在单个节点上运行的应用程序。它通过仅使用 Linux 内核锁实现了最小开销。xm378\nayLustre 文件系统操作手册 译者: 李选项 说明noflock 完全禁用flock (2) ，为默认选项。调用flock (2) 的应用程序会出现ENOSYS错误。管理员可以根据需要选择1ocalf1lock或flock挂载选项。可使用不同的选项挂载客户端，但只有那些使用flock挂载的客户端才能相互保持一致性。lazystatfs 在某些 OST 或 MDT 无啊应或已在配置中暂时或永久禁用时仍允许返回statfs(2) (pedt (1)和1Lfs-dqf(1)使用)，从而避免所有目标都可用前的阻塞。这是目 Lustre 2.9.0 以来的默认行为。nolazystatfs 使statfs (2) BAIE, BAA OST 和MDT 都可用后再返回空间使用情况。user xattr 人允许user .*命名空间中的普通用户获取/设置扩展属性。有关更多详细信息，请参见attt (5) 于册页。nouser xattr 禁用usez .*命名空间中的普通用户使用扩展属性。root 和系统进程仍可以使用扩展属性。verbose 启用额外的 mount/umount 控制台消息。noverbose AS FA AY SAY) mount/umount 控制台消息。user fid2path",
        "运行 llverdey 总是更好，以便设备测试可以轻松地从停止点再次启动。在非常大的设备上运行完整验证可能非常耗时。我们建议您可以从部分验证开始，从而在进行完整验证之前确保设备至少部分可用。44.9.3. 选项选项 说明-c|--chunksize VOZAERKY) (e, BRUUEN 1048576) ) 。-f|--force HIST TMI, ANE Te Ie I BIT A BU BOK A的确认。-h|--help SAN TA GAY PBA566\n—ULDNn—ULDNn1Lustre 文件系统操作手册 译者: Bar选项 说明-o offset 测试开始时的仿移量 (于字季，默认值为 0)。-1|--long 运行完整检查，即写入然后读取并验证磁盘上的每个块。-p|--partial 运行部分检查，仅对设备进行定期检查 (每次1GB)。-r|--read 在引w 模式运行测试之后，仅在只读 (验证) 模式下运行测试。-t timestamp 将测试开始时间设置为先前中断测试开始时打印的时间，以确保整个文件系统中的验证数据相同〈黑认值为当前时间)。-v|--verbose 在 verbose 模式下运行测试，列出所有读写操作。-w| --write 在写模式 (测试模式) Piet rallil (默认运行读和写测试)44.9.4. 示例在/devwsda 上运行部分设备验证:llverdev -v -p /dev/sdallverdev: permanently overwrite all data on /dev/sda (yes/no)? yllverdev: /dev/sda is 4398046511104 bytes (4096.0 GB) in sizeTimestamp: 1009839028Current write offset: 4096 kBTEAS _E—VS 77 FAIA ASI AAR, ARE EC A ic i PO 4096KB 处继续中断的验证:11verqev -f£ -v -p --offset=4096 --timestamc=1009839028 /dev/sdallverdev: /dev/sda is 4398046511104 bytes (4096.0 GB) in sizeTimestamp: 1009839028write completeread complete44.10. IlshowmountIshowmount 将显示",
        "Lustre 文件系统名称限于 8 个字符。Lustre 已将文件系统和目标的相关信息编码到磁盘标签中，以方便通过标签进行挂载。这使得系统管理员可随意移动磁检，而不用担心出现 SCSI 磁静重新排序，使用钳误的/dev/device 作为共享设备等问题。文件系统命名很快将尽可能做到故障安全。目前，Linux 磁盘标签限于 16 个字符。为识别文件系统中的目标，预留了 8 个字符，其余 8 个字符则为文件系统名称预留 :fsname-MDT0000 或者2 fsname-OST0al9运行以下命令，通过标签进行挂载:122\nLustre 文件系统操作手册 译者:这ay1 mount -t lustre -L2 file system label3 /mount_point下面是通过标签挂载的一个例子:1 mds# mount -t lustre -L testfs-MDT0000 /mnt/mdt注意用标签进行挂载，不应使用在多路径环境中，也不应该使用在设备再创建快照时，为在这些情况下，多个块设备具有相同的标签。尽管文件系统名称被内部限制为 8 个字符，但实际上您可以在任何挂载点挂载客户端，因此文件系统用户并不受限于短名称。例如:1 client# mount -t lustre mds0@tcp0:/short2 /dev/long_mountpoint name13.2. 启动 Lustre第一次局动 Lustre 文件系统时，各组件必须按照以下顺序局动:1. 挂载 MGT。注意如采出现组合的MGITIMDT，Lustre 将目动地正确完成MGT 和 MDT 的挂载。2. 挂载 MDT.注意如果出现多个 MDTS，则将它们全部挂载 (Lustre 2.4 版本中引入)。3. HERE OST(s).4. 挂载客户端.13.3. FESR at启动 Lustre IRS a8 BRE BE ai AB, Rist ats >. Lustre 服务可以加入到/etc/fstabH:1 mount -t lustre得到类似如下输出:123\nLustre 文件系统操作于册 译者:这ay—/dev/sdal on /mnt/test/mdt type lustre (rw)N/dev/sda2 on /mnt/test/ost0O type lustre (",
        "maqs或ost)44.8.4. 示例监控/proc/fs/lustre/osVOSS/ost/stats 文件，时间间隔为工秒，运行:1 llstat -1 1 ost44.8.5. 文件llstat 文件位于:1 /proc/fs/lustre/mdt/MDS/*/stats2 /proc/fs/lustre/mdt/* /exports/*/stats3 /proc/fs/lustre/mdc/*/stats565\nLustre 文件系统操作手册 译者:这ay4 /proc/fs/lustre/1dlm/services/*/stats5 /proc/fs/lustre/1d1lm/namespaces/* /pool/stats6 /proc/fs/lustre/mgs/MGS/exports/*/stats7 /proc/fs/lustre/ost/OSS/*/stats8 /proc/fs/lustre/osc/*/stats9 /proc/fs/lustre/obdfilter/*/exports/*/stats10 /proc/fs/lustre/obdfilter/*/stats11—/proc/fs/lustre/llite/*/stats44.9. llverdevIlverdev 用于验证块设备是否全设备运行正常。44.9.1. 梗概llverdev [-c chunksize] [-f] [-h] [-o offset] [-l] [-p] [-r] [-t timestamp][-v] [-w] device44.9.2. 说明有时，内核驱动程序错误或硬件设备故隐影响了对完整的设备的正明访问。或者，磁盘上存在的坏扇区妨碍了数据的正确存储。通名情况下，主要为系统边界相关的缺陷(如 2°32 bytes, 2°31 sectors, 231 blocks, 2°32 blocks 上) 。llverdev 实用程序在整个设备上写入并验证唯一的测试模式来确保数据在写入后可访问，且写入磁盘某一部分的数据不会履盖磁盘另一部分上的数据。llverdev 应在大型设备 (TB) 上运行。在 verbose 模式下运行 llverdey 总是更好，以便设备测试可以轻松地从停止点再次启动。在非常大的设备上运行完整验证可能非常耗时。我们建议您可以从部分验证开始，从而在进行完整验证之前确保设备至少部分",
        "打印简明信息。重新格式化已有的 Lustre fea.用于优化 MDT 的 inode 大小。打印更多信息。575\nLustre 文件系统操作手册这ay44.14.3. 示例在文件系统 testfs 的节点cfs21上创建组合的MGS 和 MDT:1 mkfs.lustre --fsname-testfs --mdt --mgs /dev/sdal在文件系统 testis 的任一节点上创建一个OST (使用以上 MGS) :1 mkfs.lustre --fsname-testfs --mgsnode=cfs21@tcp0 --ost --index=0 /dev/sdb在节点cfs22上创建独立的 MGS:1 mkfs.lustre --mgs /dev/sdal在文件系统 myfsl WET EGET MDT 〈使用以上 MGS):1 mkfs.lustre --fsname=myfs1 --mdt --mgsnode=cfs22@tcp0 /dev/sda2也可参见\"本章滴 14. mkfs.lustre\", \"15. mount.lustre\".44.15. mount.lustremount.lustre 实用程序可用于局动 Lustre 客户端或目标服务。44.15.1. 梗概1 mount -t lustre [-o options] device mountpoint44.15.2. 说明使用 mount.lustre 实用程序司动 Lustre 客户端或目标服务，不应直接调用。它是通过 mount(8) 调用的辅助程序。使用 umount 命令停止 Lustre 客户端和目标。device 选项有两种形式，有具体取决于客户端或目标服务是否已启动:选项 说明mgsname:/fsname[/subdir] 通过联系 mgsname 上的 Lustre ManagementService，在目录 mountpoint 中的客户端上挂载名为 fname 的 Lustre 文件系统〈如果指定了subdir ，则从文件系统的子目录 subdir 启动) 。mgsname 的格式定义如下。可在fstab (5) 中列出客户端文件系统，以便在司动时自动挂载。客户端文件系统即可像其他本地文件系统一样使用，并提供完整的 POSIX 标准兼容接口。576\nLustre 文件系统操作手册这ay选项block_ device44.15.3. 选项选项mgsname=mgsnode [:mgsnode ]mgsnode=mgsnid[,mgsnid]mgssec=flavor说明在物理磁盘 block_device 上局动由mkfs",
        "etc/mtab所有条目中的 lustre 类型 。1. Re ira在每个客户端节点上,运行 umount Ae SBA LEASE RSE:umount -a -t lustreDY PEER tit I EI testis 文件系统的例子:1 [root@clientl ~]# mount |grep testfs2 XXX.XXX.0.11@tcp:/testfs on /mnt/testfs type lustre (rw,lazystatfs)4 [root@clientl ~]# umount -a -t lustre5 [154523.177714] Lustre: Unmounted testfs-client124\nLustre 文件系统操作于册 译者:这aX2. tek MDT 和 MGT在MGS 和MDS 节点上，运行 umount 命令:umount -a -t lustre以下是在组合的 MGS/MDS [Filek testis 文件系统的例子:1 [root@mds1 ~]# mount |grep lustre2 /dev/sda on /mnt/mgt type lustre (ro)3 /dev/sdbo on /mnt/mdt type lustre (ro)5 [root@mds1 ~]# umount -a -t lustre6 [155263.566230] Lustre: Failing over testfs-+¥DTO0007 [155263.775355] Lustre: server umount testfs-MDTOO000 complete8 [155269.843862] Lustre: server umount MGS complete对于独立的MGS 和MDS，命令不变，但需要先在 MDS 上运行，随后在 MGS 上运行。3. Haka OSTs在每个0SS 节点上，运行 umount 命令:umount -a -t lustreDXF EIZKOSS 1 ERS at_L AA OSTs 的 testis 文件系统的例子:1 [root@ossl ~]# mount |grep lustre2 /dev/sda on /mnt/ost0O type lustre (ro)3 /dev/sdo on /mnt/ostl type lustre (ro)4 /dev/sde on /mnt/ost2 type lustre (ro)56 [root@ossl ~]# umount"
    ]
}