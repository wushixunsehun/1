{
    "query": "如何让HPC云显示使用的机时量？",
    "summaries": [
        "TH-HPC4 GPU 分区统计机时（临时版）是针对该GPU分区的计算资源使用情况进行统计的临时方案。该方案旨在提供更准确的机时记录，以便更好地管理与分配计算资源。问题由郑刚于2022年9月19日创建，内容涵盖机时统计方法、数据采集方式及初步结果。该临时版方案力求覆盖大部分使用场景，为后续正式统计提供参考依据。",
        "【已解决】GPU机时查询功能测试（V1.3.3）主要介绍了两个命令：thGpuConfig用于配置用户的GPU统计开始时间和机时量，支持新增、修改、删除配置；thGpuUsage用于查询用户GPU使用情况，包括任务数、已用卡时、总卡时等信息。用户需先设置环境变量PATH，再根据命令帮助信息进行操作。该功能由高性能计算团队开发，适用于管理员和用户查询与配置GPU资源。",
        "本文介绍了如何通过修改脚本查询HPC4 GPU利用率。在sub.sh中，于yhrun语句前添加“nvidia-smi dmon > nvi_1.log &”可持续记录GPU利用率，若需限制时间，则可添加timeout命令。该方法适用于程序运行期间的GPU使用情况监控。"
    ],
    "contents": [
        "【已解决】HPC4 GPU利用率查询\n**标签**: 无标签\n**创建时间**: 2023-01-11 14:55:40\n**更新时间**: 2023-05-09 15:59:05\n**作者**: 杜思慧\n**1.查询脚本**\n**sub.sh**\n#!/bin/bash\n#SBATCH partition=gpu1\n#SBATCH -N 1\n#SBATCH gpus-per-node=1\n#SBATCH cpus-per-gpu=8\n#timeout 1m nvidia-smi dmon > nvi_1.log &\nnvidia-smi dmon > nvi_1.log &\nyhrun python train.py\n**2.使用说明**\n在sub.sh中的yhrun语句前加上nvidia-smi dmon > nvi_1.log & , 会从程序运行开始到程序运行结束一直查询gpu利用率；若加上时间限制，则只在规定时间内查询gpu利用率。",
        "$ thGpuConfig -u zhenggang -d                                   # 删除某个用户的配置文件\n#\n#\n1.3.2\n$ thGpuUsage -h\n#\n# 天河系统工具栈-GPU卡时资源查询（管理员版）\n#\n# 功能:\n#       1.显示用户GPU卡时使用情况，如任务数/已用卡时/总卡时/使用率\n#       2.显示指定时间段的用户GPU卡时使用情况\n#\n# 版本: v1.3.3\n#\n# 作者: 高性能计算团队 2024.02.06 zhenggang@nscc-tj.cn\n#\n# 使用方法：\n#       thGpuUsage                         # 查自己\n#       thGpuUsage -u/username <用户名>  # 查用户\n#       thGpuUsage -u/username <用户名> -s/startday <开始日期> -e/endday <结束日期>\n#       thGpuUsage -A/all                # 查全部\n#       thGpuUsage -h/help               # 查帮助\n#\n# 参数说明:\n#       -s/startday 开始时间，如 2023-01-01\n#       -e/endday   结束时间，如 2023-08-01\n#       -u/username 用户名，如 -u zhenggang\n#       -A/all 查看全部\n#       -h/help     帮助信息\n#\n# 示例:\n#       thGpuUsage\n#",
        "【已解决】GPU 机时查询功能测试（V1.3.3）\n**标签**: gpu\n**创建时间**: 2023-07-13 16:40:35\n**更新时间**: 2024-02-20 11:03:10\n**作者**: 郑刚\n**问题**：【已解决】GPU 机时查询功能测试\nGPU 机时查询功能测试\n> 注意！现在只有2个命令，只有2个\n> 1. 配置命令 thGpuConfig 在 /fs1/software/gpuacct/bin 目录\n> 2. 查询命令 thGpuUsage 在 thTools 里面，不用关心目录\n1 支持专员用自己的账号给用户配置开始统计日期、卡时量（可选）\n基于开发的命令进行配置\n1.1 加载功能\nexport PATH=/fs1/software/gpuacct/bin:$PATH\n1.2 命令说明\n|命令|功能|用法|\n|`thGpuConfig`|配置某个账号的gpu统计开始时间和机时量|执行 `thGpuConfig` 获得 help 信息|\n|`thGpuUsage`|支持专员版的查询命令|执行 `thGpuUsage -h` 获得 help 信息|\n1.3用法示例\n1.3.1 thGpuConfig\n$ export PATH=/fs1/software/gpuacct/bin:$PATH\n$ thGpuConfig -h\n#\n# 天河系统工具栈-GPU卡时资源配置\n#\n# 功能:\n#       1.新增或修改某个用户的GPU卡时配置数据\n#       2.删除某个用户的GPU卡时配置数据\n#\n# 版本: v1.3.1\n#\n# 作者: 高性能计算团队 2024.01.31 zhenggang@nscc-tj.cn\n#\n# 使用方法：\n#       $ thGpuConfig\n#       $ thGpuConfig -h/help\n#       $ thGpuConfig -u/username <用户名> -i/info  # 显示信息\n#       $ thGpuConfig -u/username <用户名> -t/type <GPU资源类型",
        "thGpuConfig -u/username <用户名> -i/info  # 显示信息\n#       $ thGpuConfig -u/username <用户名> -t/type <GPU资源类型名> -s/startday <开始日期> -c/cardhour <GPU卡时>\n#       $ thGpuConfig -u/username <用户名> -d/delete\n#\n# 参数说明:\n#       -u/username  用户名，如 -u zhenggang\n#       -t/type GPU资源类型名，如 total, a100, v100\n#       -s/startday  开始时间，如 2023-01-01\n#       -c/cardhour  GPU卡时, 如 1000\n#       -d/delete    删除，添加这个选项表示删除某个账号的配置\n#       -h/help     帮助信息\n#\n# 示例:\n#       $ thGpuConfig\n#       $ thGpuConfig -h\n#       $ thGpuConfig -u zhenggang -i                                   # 显示某个用户的配置文件\n#       $ thGpuConfig -u zhenggang -t total -s 2023-01-01  -c 1000      # 配置总GPU卡时\n#       $ thGpuConfig -u zhenggang -t a100  -s 2023-01-01  -c 1000      # 配置某个队列的卡时\n#       $ thGpuConfig -u zhenggang -d",
        "【已解决】TH-HPC4 GPU 分区统计机时（临时版）\n**标签**: th-hpc4,  gpu\n**创建时间**: 2022-09-19 20:50:02\n**更新时间**: 2022-09-19 20:50:02\n**作者**: 郑刚\n**问题**：TH-HPC4 GPU 分区统计机时（临时版）"
    ]
}