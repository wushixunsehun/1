{
    "query": "如何检查HPC4系统的gn33节点？",
    "summaries": [
        "TH-3F系统进行了VASP单节点性能测试，使用CuInS2算例进行结构优化。测试了不同K点设置下的性能，并对比了56核和64核的运行时间。测试中调整了并行参数，包括NPAR=4和KPAR=2。结果显示，64核在sm和tcp模式下性能优于56核glex模式。",
        "文本内容涉及多个寄存器地址及其值，主要与芯片状态、信用使用情况及PCB板状态相关。包括不同模块的共享信用使用寄存器值、HP_CREDIT相关寄存器信息，以及通过命令`inm_check_status`检查芯片状态寄存器并与文档中的默认值进行比较，发现部分寄存器值不一致。此外，还包含查看PCB板状态的命令`dump_hnr_llp_staus`及其参数示例。",
        "在MN7上测试Linpack，使用16个FT核，内存64GB，需卸载MT模块。提交任务命令为./sub.sh $nodelist $reservation $logdir，结果应达到约100Gflops。测试过程中需检查DSP设备权限，使用check_device脚本验证节点。部分节点（如THCP4、THMT1）存在异构核问题。18-19机柜无需跑Linpack，仅需网络测试和存储挂载。测试日志显示通过残差检查，任务成功完成。"
    ],
    "contents": [
        "；\n-m model_name：模块名称（ALL为检查所有）\n例27：该例为从118022#ZNI芯片（管理服务器mn3）的读取所有状态寄存器，并与文档../Config/zni_all_status_reg.txt中默认值（IDLE状态下的ZNI芯片值）比较，输出不一致的寄存器值；\nLroot@mn3*TH3 Bin}#\n[root@mn3%rH3 Bin]# ./inm_check_status -t zni -o 118017 -m ALL\n\n-/inm_check_status -t zni -o OxicdO1 -m ALL\n\nchiptype=zni ,serialnum=118017 ,mode1_name-ALL\n\nzni-118017,in_model(TP)_reg(0x71d) Should be 0x8102040c18000438 not be 0x8102040c180003de\nzni-118017,in_model (TP) _reg(0x720) should be 0x438 not be Ox3de\n\nzni-118017, in_model (vog)_reg(0x6042) should be 0x0 not be Oxi\n\nzni-118017 , in_mode1 (vog)_reg(0x6057) Should be 0x0 not be Oxi\n\nzni-118017,in_model(ET)_reg(0x501) Should be Oxa0400 not be Oxe0400\nzni-118017 ,in_model (RP)_reg(0x690) Should be 0x40000004208 not be 0x4000000cf08\nzni-118017 ,in_model(RP)_reg(0x691) Should be 0x40000004208 not be 0x40000004F08\n\nzni-118017,in_model (RP)_reg(0x6b4) should be Ox8c2cf00271d17 not be Ox9cacf00271d17\nzni-118017,in_model (RP)_reg(0x6b5) Should be Ox8c2cF00261d16 not be Ox9caff00261d16\nzni-118017, in_model(RP)_reg(0x6b9) Should be 0x200100200100100 not be 0x200100100100100\n[root@mn3%TH3 Bin]#\n7）PCB板状态查看\ndump_hnr_llp_staus\ndump_ hnr_llp_staus P000AM1/S00A00/Z0C0CPM0\n查看PCB",
        "=    0    number of steps for IOM\nIBRION =    -1    ionic relax: 0-MD 1-quasi-New 2-CG\nISIF   =     2    stress and relaxation\nPOTIM = 0.2\nISYM=0\nDOS related values:\nISMEAR =     0;\nSIGMA  =   0.05\n#NEDOS=2999\nWrite flags\nLWAVE  =      F    write WAVECAR\nLCHARG =      T    write CHGCAR\nLVTOT  =      F    write LOCPOT, local potential\nLORBIT = 11\nALGO=Fast\nLMAXMIX=4\nLDAU=T\nLDAUTYPE=2\nLDAUL=2 -1 -1\nLDAUU=2.20 0.00 0\nLDAUJ=0.20 0.00 0\nLDAUPRINT=2\nKPOINTS\n选择5组K点测试\n7-7-3     8-8-4    9-9-5     10-10-6    11-11-7\n作业脚本\n一个节点56核，计算结构优化。\n#!/bin/bash\nyhrun -N 1 -n 56  -p thcp1  vasp_ncl\n调整参数\nINCAR\n其余不变\nNPAR = 4\nKPAR =2\n作业脚本\n#!/bin/bash\nexport UCX_TLS=sm\nNODES=1\nCORES=64\nPARTITION=thcp1  # use 'yhi' to check partitions\nEXE=vasp # choose one vasp version to run. e.g. vasp / vasp_ncl / vasp_gam / vasp_neb ...\nUCX_TLS=sm,tcp yhrun -N $NODES -n $CORES -p $PARTITION $EXE\n测试数据\n|TH-3F|单节点测试|vasp5.4.4|\n|VASP测试|用户测试|nscc-tj|\n|KPOINTS",
        "【已解决】TH-3F系统VASP单节点性能测试\n**标签**: TH-3F VASP  sm, tcp, glex 性能测试\n**创建时间**: 2022-09-23 10:50:57\n**更新时间**: 2022-09-23 10:50:57\n**作者**: 刘栋杰\nTH-3F系统VASP单节点性能测试\n用户算例\nPOSCAR\nPOSCAR-CuInS2\n1.00000000000000\n5.5935662547724148   -0.0000001972541281    0.0000002856271407\n-0.0000001982126414    5.5935662339574144    0.0000001488971322\n0.0000005736285978    0.0000003005384429   11.2906108404215839\nCu   In   S\n4     4     8\nDirect\n-0.0000000374484856  0.4999999641516956  0.2500000387262479\n0.5000000028390460 -0.0000000078451421  0.7499999891387383\n0.4999999631667135  0.5000000353607148  0.5000001806741946\n0.0000000255524713  0.0000000594474677 -0.0000001852810345\n0.0000000251258136  0.4999999786961337  0.7500000536607697\n0.4999999674254817 -0.0000000221437011  0.2499999788249322\n0.4999999849653031  0.5000000123838864  0.0000001468171165\n0.0000000149209289 -0.0000000016277274  0.4999998626520079\n0.7500005080070462  0.2194776843469671  0.8750002226413106\n0.2499995117587629  0.7805222670736877  0.8750001899530040\n0.2194770895357970  0.2500003327695614  0.1249998773550668\n0.7805229278848418  0.7499996809912697  0.1249998710181722\n0.2805221962357510  0.2500005051614309  0.6249998062116768\n0.7194778145299330  0.7499995039139766  0.6249998424424036\n0.2499995594992707  0.7194771218760166  0.3750001221478534\n0.7500004670013228  0.2805229064437607  0.3750000890175397\nINCAR\n$ cat INCAR\nStartparameter for this run:\nISTART = 0    job   : 0-new  1-cont  2-samecut\nICHARG = 2    charge: 1-file 2-atom 10-const\nISPIN=2\nElectronic Relaxation\nENCUT  =  550.0 eV\nNPAR = 4\nNELMIN =8\nLREAL= Auto !evaluate projection operators in real space\nEDIFF=10-6\nIonic relaxation\nEDIFFG = -0.02     stopping-criterion for IOM\nNSW    =    0    number of steps for IOM\nIBRION =    -1    ionic relax: 0-MD 1-quasi-New 2",
        "主要是thcp3分区）\n在mn7上测试linpack。\ndsp模块没加载，16个ft核使用内存64GB。\n记得卸载mt模块，clush -w $nodelist \"rmmod mt\"。\n目录：/root/tools/linpack/ft_linpack_64GB\n提交命令./sub.sh $nodelist $reservation$logdir\nCroot@mn6 ft_linpack_646B]# ./sub.sh\nUsage:\n-/sub.sh $nodelist $Sreservation $logdir\n\ncn9633 test 20220607\n进入$logdir，用“tail -f”查看输出情况。\n: Column=000000576\n\n= Colum\n: Column=000002496\n\necoooococoo\n\nIIAx-bll_oo / C eps * CII x Il_oo * II A Il_oo + Il b Il_oo ) * N\n- The relative machine precision (eps) is taken to be1,110223e-16\n- Computational tests pass if scaled residuals are less than16.0\n\n7%«7326402\n\n12%.443e+02\n.6和.357e+02\n= Column=000001728.1% 6flops=1.308e+02\n\n100002112«6%\n\n0%\n\n1282402\n.262e+02\n检查结果，跑到100Gflops左右的结果是正常的。\n: WR12L2L4\n\nSOSSSSSSSSOSOSOSOSSOSSSSSSSOOSO OOOO SO OOS\n\n: End of Tests.\n\n82000\n\n: HPL_pdgesv© start time Tue Jun 7 09:34:46 2022\n\n: HPL_pdgesv() end time\n\n+149e+02\n-149e+02\n\n= Column=000080832 Fraction=98.6% Gflops=1.149e+02\n00081216 Fractio\n100081600 Fractio\n\n9.0% GF lop:\n9.5% GF lop:\n\n-149e+02\n.149e+02\n\n192243199.481.1489e+02\n\nTue Jun 7 10:28:05 2022\n\n: 一YYY--YYY--YYY--YYY--YYY--YYY--YYY--YYY--YYY--YYY--WYY--YYY--YYY--YYY--YYY-",
        "_reg_xbar_share_credit_used_0x89a21 :0x215021c021cO21¢\ncsr_grp3_xbar_share_credit_used:0x215\nznr-32,T71e09-xbar_3x1_Mporti_csr_reg_xbar_share_credit_used_vc7_vc4_0x89a5a: 0x26\ncsr_xbar_share_credit_used_vc4 :0x26\nznr-32,T71e09-xbar_3xi_mportl_csr_reg_xbar_share_credit_used_0x89a61 :0x217021c021cO21c\ncsr_grp3_xbar_share_credit_used:0x217\nznr-32,T71e10-subswitch_8x6_cross3_csr_reg_xbar_share_credit_used_0x8a2el :0x9b009b009b009b\ncsr_grp0_xbar_share_credit_used:0x9b\n\ncsr_grpl_xbar_share_credit_used:0x9b\n\ncsr_grp2_xbar_share_credit_used:0x9b\n\ncsr_grp3_xbar_share_credit_used:0x9b\n\nHP_CREDIT\n\nznr-32 ,HTB0_HPA_CSR_ADDR_PRIVATE_CREDIT_USED_VC67_A_0x403e:0x5155180000000000\nReserved: 0x55180000\n\nznr-32 HTB0_HPA_CSR_ADDR_PRIVATE_CREDIT_USED_VC67_8_0x4045 :0x1115580000000000\n\nReserved: 0x15580000\n\nznr'-32 HTB0_HPA_CSR_ADDR_PRIVATE_CREDIT_USED_VC67_C_0x404c :0x5511580000000000\nReserved: 0x11580000\n\nznr'-32 HTB0_HPA_CSR_ADDR_PRIVATE_CREDIT_USED_VC67_D_0x4053:0x5155580000000000\nReserved: 0x55580000\n\nznr-32,HTB0_HPA_CSR_ADDR_SHARE_CREDIT_USED_VC67_D_0x406f : 0xf000820820000000\n\nHP0_4个HPTX瑞FTFO深度:0x820820\n\nHP0_4个列选信号:Oxf\ninm_check_err -t chiptype -o chipid -m model_name\n检查芯片错误寄存器命令\n-t znr|zni：目标芯片类型；\n-o chipid：路由起始芯片编号；\n-m model_name：模块名称（ALL为检查所有）\n例27：该例为从118022#ZNI芯片（管理服务器mn3）的读取所有状态寄存器，并与文档../Config/zni_all_",
        "Tue Jun 7 10:28:05 2022\n\n: 一YYY--YYY--YYY--YYY--YYY--YYY--YYY--YYY--YYY--YYY--WYY--YYY--YYY--YYY--YYY-\n: Max aggregated wall time rfact .\n\n: + Max aggregated wall time pfact .\n: + Max aggregated wall time mxsup .\n: Max aggregated wall time update . . :3180.13\n: + Max aggregated wall time lasup .\n\n: Max aggregated wall time up tr sv\n\nPASSED\n\nwith the following results:\ncompleted and passed residual checks.\ncompleted and failed residual checks.\nskipped because of illegal input values.\nMT节点异构核（目前涉及thcp4、thmt1等分区）\n注：18-19机柜暂时不需跑linpack，网络测试通过并且挂载存储即可。\n检查dsp的设备权限\n进入/root/tools目录中，使用脚本./check_device +nodelist\n[rootGmn7 tools]# ./check_device cn[19458,19476,19496-19503,19892,19917-19920,19922,19952,19990-19993,20001,20089,20091,20094,20147],cn[11520-11521,11523-11527,11529,1153\n6,11546-11550,11552-11564,11571,11573-11578,11580-11582,11591-11592,11594,11602-11611,11627-11629,11633,11637,11646,11657-11658,11660-11671,11676-11681,11683-11705,11710，\n11718-11721, 11732-11734, 11743-11751, 11760-11761, 11763-11764, 11767, 11769-11807, 11833, 11868-11871, 11877, 11880, 11886-11887, 11896-11912, 11915, 11917, 11927-11933, 11941-11945, 11\n960-11963, 11965-11967, 11969, 11971-11974, 11992-11993, 11995-11996, 11999-12000, 12002-12004, 12013-12015, 12024-12027, 12029",
        "N $NODES -n $CORES -p $PARTITION $EXE\n测试数据\n|TH-3F|单节点测试|vasp5.4.4|\n|VASP测试|用户测试|nscc-tj|\n|KPOINTS|56核-glex|64核-sm，tcp|\n|10106|4160.572|1917.167|\n|11117|5639.05|2610.358|\n|773|1000.443|464.892|\n|884|1772.705|817.589|\n|995|2736.395|1312.553|\n|并行参数设置|NPAR=4|NPAR=4|\n|添加：||KPAR=2|\nTH-3F VASP测试\n317\n日56核好ex 日64核sm， tcp",
        "0x200100200100100 not be 0x200100100100100\n[root@mn3%TH3 Bin]#\n7）PCB板状态查看\ndump_hnr_llp_staus\ndump_ hnr_llp_staus P000AM1/S00A00/Z0C0CPM0\n查看PCB板整体状态\n参数为PCB板名称\n例28：该例为查看P000A框中NRM1的状态；\n0 10 41 12 13 15 14\n\n1\n\n+ Oho\n\nsoba\n\n+ obo\n\n+ Oho\n\n+ obo\n\n: POOOAML, Start_mgtid:0\n26 25 24 23 22 31 21 20 19 18 17 16 28 29 30 27\n\n+ Oho\n\n[rooremn3%TH3 Bin]# ./dump_hnr_11p_staus POOOAML\n\nroots oe\n\nLOCATION\n\ncpm_num:\n\nLone\n,ovetousono\n,ovetousa\nLoneabo eee eee eeeousono\n,ovetousa\n,ovetousa\n,ovetousa\naSimeone eeecuma\nLone<meno:sonepl—\n3gir\n\n,ovaero.Lousea\nLeenmenos.Lowesa\nLeenmeno sessena\n,ovSeo eeeouna\n,ovSee eeeousa\n\noneeee ee cee eeousa\n\nonoSimeone eeecuma\n\noven}Heke eeeones}-\n,ovetous-\n,ovo-See eeeous-\n,ovSeo eeeous-\na-eeen-\namenos.Lone-\nLonemenosLone-\n,ov-ee .Loum-\n,ov.4atone\"\n\n3\n\nLone8atone2-\n\neo\neee ee\n1ororod? do dod|| ee es es ee ee 1\n\nretry :\n\nretry :\nlane\nhandup:\nhandup:\nlane\n\nPU PU PU PU PU PU PU PU PU PU PU PU PU PU PU\n15 14 13 12 11 10 09 08 07 06 05 04 03 02 01 00\n\nPu\n\n| 1\nPU PU PU PU PU PU PU PU PU PU PU PU\n\ni\nPU\n\n1 1\nPU PU\n31 30 29 28"
    ]
}