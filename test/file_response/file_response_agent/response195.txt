{
    "query": "如何将TH-HPC2上cfbc343c 账号的用户根目录改为 THL8 文件系统？给出具体命令。",
    "summaries": [
        "本文档为HPC4系统上运行AlphaFold2的使用说明。用户需从共享目录拷贝运行脚本至个人目录，修改脚本权限，并根据需求调整输入输出路径、模型、GPU卡号及数据库类型等参数。最后通过yhbatch命令提交任务。结果文件将生成在指定目录中。",
        "在 TH-HPC1~4 和 TH-eX 上配置 orca503 软件，需根据不同节点使用相应命令。对于 TH-HPC1~3，使用 `add_user orca 用户名 支持专员名字` 添加权限，并在用户 `.bashrc` 中设置 `MODULEPATH`，加载 module 模块后即可使用。TH-HPC4 需通过 rsync 拷贝软件至用户目录，并参考 `sub-orca.sh` 脚本使用。TH-eX 配置方式类似，需设置环境变量并加载模块。共享目录包含多个版本的 orca，如 orca/5.0.3、orca/5.0.4 等。",
        "本文档介绍了TH-HPC1-3、TH-HPC4和TH-eX系统中软件共享工具的使用说明。目的是通过共享目录安装商业软件，减少资源浪费，并通过facl限制访问权限。用户需获取账号密码，使用`add_user`命令添加权限，并配置环境变量。新软件安装者需按规则安装并测试。文档还提供了相关命令及加密方式，以及各系统的facl限制情况。TH-HPC1-3因facl限制较小，采用拆分账号方式管理软件。"
    ],
    "contents": [
        "【已解决】TH-HPC1-3 TH-HPC4 TH-eX 软件共享工具使用说明\n**标签**: hpc4,  共享\n**创建时间**: 2022-12-28 10:19:04\n**更新时间**: 2023-09-18 18:33:02\n**作者**: 郑刚\n**问题**：【已解决】TH-HPC1-3 TH-HPC4 TH-eX 软件共享工具使用说明\nHPC4 的相关说明\n1. 背景和目的\n由于如 matlab 等软件需要手动安装，且版本众多，并且占用大量文件数和部分存储资源，造成浪费，故考虑在共享目录下安装配置一系列的商业软件，并限制访问权限，根据facl的方式进行共享目录文件的访问和module的访问。\n2. 使用方法\n2.1 为用户添加软件环境\n1.获得 TH-HPC4 系统 cfbc34 账号的登录密码（可以找郑刚要）\n2.（可选）执行 `get_soft` 查看当前可用软件，例如：\n$ get_soft\n#Date               Softare              MD5        OperatorName   Version(by hand)\n2022-12-27 16:59:27 matlab               dc6c1d     liyueyan4      matlab2021a\n3.为用户添加指定软件的权限，例如为 liyl4 账号添加 matlab 的权限，**注意要提供 operatorname，也就是谁登录操作的，如 zhenggang**\n$ add_user matlab liyl4 zhenggang4\nFind soft user: liyl4, not need to add user\nPlease add modulepath to user's environment\nexport MODULEPATH=$MODULEPATH:/fs1/home/cfbc34/dc6c1d/modulefiles\n> 添加后用户已经可以使用改软件了，但建议为用户配置好 module 环境\n4.登录用户账号，为用户添加 export 声明，例如\nexport MODULEPATH=$",
        "cfbc34/dc6c1d/modulefiles\n> 添加后用户已经可以使用改软件了，但建议为用户配置好 module 环境\n4.登录用户账号，为用户添加 export 声明，例如\nexport MODULEPATH=$MODULEPATH:/fs1/home/cfbc34/dc6c1d/modulefiles\n或者告诉用户，让其自行添加到环境变量中。\n5.（可选）登录用户账号，执行 module 命令查看是否可用，并进行测试\n[liyl4] $  /fs1/home/cfbc34/dc6c1d/modulefiles\nmatlab/2021a\n[liyl4] $ module add matlab/2021a\n[liyl4] $ which matlab\n/fs1/home/cfbc34/dc6c1d/matlab2021a/bin/matlab\n2.2 新软件安装者\n1. 获得 TH-HPC4 系统 cfbc34 账号的登录密码（可以找郑刚要）\n2. 在指定目录按照指定规则安装软件，并配置modulefiles环境（可以问郑刚）\n3. 使用自己的账号进行可用性测试\n3 补充\n3.1 工具命令\n登录后可以执行：\n$ softhelp\n查看相关命令的使用方法：\n|命令|功能|格式|\n|add_soft|添加一款软件|$ add_soft softname operatorname|\n|add_user|为某款软件添加使用者|$ add_user softname username operatorname|\n|del_user|为某款软件删除使用者|$ del_user softname username operatorname|\n|get_soft|查看已添加的软件列表|$ get_soft softname|\n|get_soft_user|查看某一款软件的使用者列表|$ get_soft_user softname|\n|get_user_soft|查看某一用户可使用的软件列表|$ get_user_soft username|\n|get_all_soft_user|查看所有软件的使用者|$ get_all_soft_user|\n3.2 加密方法\n如 cfbc34 等“乱码” 是使用 md5 加密生成，相关软件目录结构如下\n- /fs1/home/cfbc34\n- cfbc34 （加密）\n- dc6c1d （加密）\n- matlab2019\n- matlab2021a\n- ... ...\n- cfbc34 （加密）",
        "【已解决】在 TH-HPC1~4 TH-eX配置 orca503 软件\n**标签**: hpc4;orca\n**创建时间**: 2022-03-11 09:10:40\n**更新时间**: 2024-08-15 11:39:47\n**作者**: 郑刚\n**问题**：配置 orca503 软件\n配置 orca\n配置到用户下\n在 TH-HPC1~3 配置 orca503 软件\n配置中，使用  cfbc341a cfbc341a  cfbc343a 账号分别配置 HPC1~3\n命令为：\nadd_user orca 用户名 支持专员名字\n执行后，添加 MODULEPATH 环境到用户 ~/.bashrc 文件，然后加载 module 模块即可\n例如：\n1、登录 cfbc343a\n2、添加权限\nadd_user orca zhenggang3 zhenggang\n3、登录 zhenggang3(用户），写入 ~/.bashrc\nexport MODULEPATH=$MODULEPATH:/THL8/home/cfbc343a/4c7ffd/modulefiles\n4、加载 ~/.bashrc 加载 module 使用命令\nsource ~/.bashrc\nmodule add orca\nwhich orca\n5、正式计算请提交任务\n在 TH-HPC4 配置 orca503 软件\n使用有权限的账号，拷贝 `/fs1/software/commerial/orca/orca503` 到用户目录\n比如用户账号为 `zhangsan`，支持专员账号为 `zhenggang4`，配置步骤为：\n# 1. 登录 zhangsan\n[zhangsan] $\n# 2. 拷贝文件\n[zhangsan] $ rsync -ltrvP zhenggang4@th-hpc4-ln1:/fs1/software/commerial/orca/orca503 .\n# 3. 输入 zhenggang4 账号密码\n# 4. 完成拷贝后，参考 orca503 里面的 sub-orca.sh 脚本进行使用\n在 TH-eX 配置 orca 412\n命令为：\nadd_user orca 用户名 支持专员名字\n执行后，添加 MODULEPATH 环境到用户 ~/.bashrc 文件，然后加载 module 模块即可\n例如：\n1、登录 cfbc343\n2、添加权限\nadd_",
        "【已解决】HPC4系统alphafold2运行使用说明\n**标签**: HPC4 alphafold2\n**创建时间**: 2021-11-12 17:30:53\n**更新时间**: 2021-11-18 15:53:44\n**作者**: 吴琪\nHPC4系统alphafold2运行使用说明\n运行脚本拷贝\n从共享目录下拷贝运行脚本到自己目录下\n(base) [wuqi@th-hpc4-ln0 al]$ cp /fs1/software/alphafold/job.sh ./\n(base) [wuqi@th-hpc4-ln0 al]$ cp /fs1/software/alphafold/run_alphafold.sh ./\n修改脚本权限\n(base) [wuqi@th-hpc4-ln0 al]$ chmod 755 ./*\n修改输入参数\n打开job.sh文件，修改输入数据，输出数据的路径等运行参数\n#!/bin/bash\nmodule add CUDA/11.4.2\nyhrun run_alphafold.sh -d /fs1/software/alphafold/data \\\n-o /fs1/home/wuqi/test/rcsb_pdb_6ZXQ \\ 输入序列路径\n-m model_1 \\ 运行使用model，全部model为 model_1，model_2，model_3，model_4，model_5\n-f /fs1/home/wuqi/software/fasta_seq/rcsb_pdb_6ZXQ.fasta \\ 输出结果路径\n-a 1,2 \\ 使用GPU卡\n-t 2021-08-19 \\ 使用数据库标签\n-p \"reduced_dbs\" 使用数据库类型 可选为\"reduced_dbs\" 和 \"full_dbs\"\n任务提交\n(base) [wuqi@th-hpc4-ln0 al]$ yhbatch -N 1 -p gpu ./job.sh\n结果文件\n(base) [wuqi@th-hpc4-ln0 rcsb_pdb_6ZXQ]$ ll\ntotal 20736\n-rw-rw-r 1 wuqi wuqi 13559919 Nov 18 09:54 features.pkl\ndrwxrwxr-x 2",
        "orca 用户名 支持专员名字\n执行后，添加 MODULEPATH 环境到用户 ~/.bashrc 文件，然后加载 module 模块即可\n例如：\n1、登录 cfbc343\n2、添加权限\nadd_user orca zhenggang5 zhenggang5\n3、登录 zhenggang5(用户），写入 ~/.bashrc\nexport MODULEPATH=$MODULEPATH:/fs2/home/cfbc34/4c7ffd/modulefiles\n4、加载 ~/.bashrc 加载 module 使用命令\nsource ~/.bashrc\nmodule add orca\nwhich orca\n> 共享目录有 orca/5.0.3  orca/5.0.4 ... ...",
        "结构如下\n- /fs1/home/cfbc34\n- cfbc34 （加密）\n- dc6c1d （加密）\n- matlab2019\n- matlab2021a\n- ... ...\n- cfbc34 （加密）\n- dc6c1d （加密）\n- matlab2019\n- matlab2021a\n- ... ...\n- dc6c1d （加密）\n- matlab2019\n- matlab2021a\n- ... ...\n- matlab2019\n- matlab2021a\n- ... ...\n- matlab2021a\n- ... ...\n- ... ...\n3.3 通过 facl 实现\nfacl 的数量有限制，测试结果如下：\n|系统|命令版本|最大数量|\n|TH-1A|2.2.49|27|\n|TH-HPC1|2.2.51|27|\n|TH-HPC4|2.2.53|497|\n|TH-HPC5|2.2.53|128+(only such users)|\n|TH-3F|2.2.53|790+(only such users)|\n因此，当 facl 达到上限时，可能需要再搞一个软件目录之类的...\nTH-eX\n方法与 HPC4 一样，账号可联系郑刚获取\nTH-HPC1~HPC3\n由于 HPC1-3 的 facl 数量有限制，因此考虑简单拆分\n|系统|账号|软件|\n|TH-HPC1|cfbc341a|matlab|\n|TH-HPC2|cfbc342a|matlab|\n|TH-HPC3|cfbc343a|matlab|\n当某个账号的可用 facl 数量超过限制，相关命令会被提示失败，请联系郑刚增加可用账号和工具环境（郑刚联系如李跃岩等，新增软件环境）\n当需要增加新的软件时，也联系郑刚。"
    ]
}