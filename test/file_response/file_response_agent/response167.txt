{
    "query": "如何在TH-eX上关闭vnc服务？",
    "summaries": [
        "EX计算节点已支持通过VNC图形化界面访问。用户需提交mantis申请管理员添加reservation=x11权限。启动VNC需加载模块并设置密码，使用vncserver和vncviewer命令。连接时需填写用户名、IP和端口，并输入密码。退出VNC可使用vncserver -kill命令。Windows用户可通过安装VNC Viewer软件，并使用SSH端口转发实现连接。",
        "本文总结了EX计算节点启动VNC问题的解决过程。首先，通过安装X11相关依赖，包括X Window System、字体库和开发包，并手动安装xkbdata解决虚拟键盘问题，最终使VNC在登录节点正常运行。其次，为了解决无法使用桌面图标的问题，安装gnome-tweaks工具，并在VNC中启用桌面图标功能。",
        "【已解决】节点可视化自动执行程序，支持本地一键启动VNC节点可视化，仅适用于有可视化分区的系统（hpc4和ex）及开通权限的账户。软件位置为http://192.168.0.173/library/bcaa89a6-5970-4ab7-bb5d-6948d2f193fd/高性能量计算部/04-常用软件/ThAutoVis。"
    ],
    "contents": [
        "【已解决】EX计算节点启动vnc问题解决\n**标签**: vnc\n**创建时间**: 2024-07-23 11:27:28\n**更新时间**: 2024-07-25 14:26:22\n**作者**: 陈维耀\n一、vncserver起服务\n通过查看`vnc`的`vncserver`可执行文件，需要的`X11`依赖是指定了路径的，不能通过简单的设置环境变量解决；手动编译的`turbovnc`会检测系统其他路径的环境，但安装后这些依赖的路径不会改变。\n- 可考虑手动安装`X11`相关依赖，修改`vncserver`和`xstartup.turbovnc`内的相关路径解决，由于`X11`相关依赖内的依赖也是通过路径直接指定，需要修改的地方很多，比较容易出错。（该方式尝试未解决，修改不完整）\n- 使用`root`权限安装所需`X11`依赖，需要安装内容如下：\n```bash\nsudo yum groupinstall \"X Window System\"\nsudo yum install xorg-x11-xkb-utils xorg-x11-fonts-Type1 xorg-x11-fonts-misc xorg-x11-fonts-75dpi xorg-x11-fonts-100dpi\nsudo yum install dejavu-sans-fonts dejavu-sans-mono-fonts dejavu-serif-fonts liberation-fonts\nsudo yum install libX11-devel libXext-devel libXrender-devel libXtst-devel libXi-devel libXrandr-devel libXinerama-devel libXcursor-devel\n#缺少虚拟键盘相关数据，手动安装\nwget https://www.x.org/releases/individual/data/xkbdata-1.0.1.tar.gz\ntar xzf xkbdata-1.0.1.tar.gz\ncd xkbdata-1.0.1\n#默认安装到/usr/local，这里为了和登录节点一致，安装到/usr\n./configure prefix=/usr\nmake\nmake install\n```\nsudo yum groupinstall \"X Window System\"\nsudo yum install xorg-x11-xkb-utils xorg-x11-fonts-Type1 xorg-x11-fonts-misc xorg-x11-",
        "【已解决】EX使用VNC图形化界面\n**标签**: vnc\n**创建时间**: 2024-03-22 11:12:18\n**更新时间**: 2024-07-23 10:55:25\n**作者**: 陈维耀\n说明：目前EX计算节点已经能够使用vnc，提交`mantis`让管理员添加`reservation=x11`权限即可。\n<a id=\"section1\"></a>\n一、超算系统vnc\n1. 启动VNC\n```bash\nmodule load vnc/3.0.3\n# 启动VNC，首次启动需要设置密码，根据提示完成\nvncserver :1\n# 启动图形界面\nvncviewer\n```\nmodule load vnc/3.0.3\n# 启动VNC，首次启动需要设置密码，根据提示完成\nvncserver :1\n# 启动图形界面\nvncviewer\n**注：**启动`VNC`时若显示下面输出则端口开启，若显示`A VNC server is already running as :8`，说明端口被占用，需要切换端口。\nae Py /\n[chenwy@th- ex- -tn1 ~]$ vncserver :8 -\nDesktop 'TurboVNC: th-ex-Ln1:8 (chenwy)' started on display th-ex-Ln1:8\nStarting applications specified in /fs2/software/vnc/TurboVNC//bin/xstartup. turbovne\nLog file is /fs2/home/chenwy/.vnc/th-ex-1n1:8.log\n2. 填写`VNC server`：`username@IP:port`，点击`Connect`\nNew TurboVNC Connection@th-ex-in0                             x\nTURBO) VNC server: | chenwy@192.168.10.50:5901           一\nWNC) hostdisplaynum, host:port = connect to VNC server\n[user@Jhost = start TurboVNC Session Manager for host",
        "一       口       x\nfile View Help\nvnc connect\n‘Address book\n~ 人\nchenwy                localhost:5908\n2 device(s)",
        "`\nsudo yum groupinstall \"X Window System\"\nsudo yum install xorg-x11-xkb-utils xorg-x11-fonts-Type1 xorg-x11-fonts-misc xorg-x11-fonts-75dpi xorg-x11-fonts-100dpi\nsudo yum install dejavu-sans-fonts dejavu-sans-mono-fonts dejavu-serif-fonts liberation-fonts\nsudo yum install libX11-devel libXext-devel libXrender-devel libXtst-devel libXi-devel libXrandr-devel libXinerama-devel libXcursor-devel\n#缺少虚拟键盘相关数据，手动安装\nwget https://www.x.org/releases/individual/data/xkbdata-1.0.1.tar.gz\ntar xzf xkbdata-1.0.1.tar.gz\ncd xkbdata-1.0.1\n#默认安装到/usr/local，这里为了和登录节点一致，安装到/usr\n./configure prefix=/usr\nmake\nmake install\n安装后在登录节点可正常使用`vnc`。\n二、无法使用桌面图标\nsudo yum install gnome-tweaks\n安装后在`vnc`中命令行执行`gnome-tweaks`，然后按照下图开启桌面图标：\nJ        Q_ Tweaks\nExtensions\nAppearance   1\nFonts\nKeyboard & Mouse\nPower\nSound\nStartup Applications\nTop Bar\nWindows\nWorkspaces.\nApplications menu\n{                 -based\nDesktop icons\nP              kto\nHorizontal workspaces\nLaunch new instance\nPlaces status indicator\ni                   1                 7\nWindow list",
        "一\nWNC) hostdisplaynum, host:port = connect to VNC server\n[user@Jhost = start TurboVNC Session Manager for host\nAbout...     Options...     Connect     Cancel\n3. 输入VNC密码：\nStandard VNC Authentication [TLSVnc]@th-ex-In0                      x)\name\n| Password: ||                                                                                  ]\n4. 退出VNC：\n```bash\nvncserver -kill :1\n```\nvncserver -kill :1\n二、windows连接超算vnc\n1. 下载`vnc viewer`软件：https://www.realvnc.com/en/connect/download/viewer/\n2. 按照[部分一](#一、超算系统vnc)启动vncserver\n3. 打开`cmd`，输入下面命令将端口映射到本地（也可使用`mobaxterm`的`tunnel`）\n```bash\nssh -t -L 5901:localhost:5901 <username>@<ip> ssh -t -L 5901:localhost:5901 <nodename>\n```\nssh -t -L 5901:localhost:5901 <username>@<ip> ssh -t -L 5901:localhost:5901 <nodename>\n4. 打开`vnc viewer`输入`sever ip`即可连接：\nRealVNC Viewer",
        "【已解决】节点可视化自动执行程序\n**标签**: 无标签\n**创建时间**: 2024-12-27 16:14:38\n**更新时间**: 2024-12-27 16:14:38\n**作者**: 李云龙\n**问题**：一键启动节点可视化\n节点可视化程序实现\n1.可本地实现一键启动VNC节点可视化；\n2.仅限有可视化分区的系统，即hpc4和ex；\n3.仅限开通了可视化分区访问权限的账户；\n软件位置：\nhttp://192.168.0.173/library/bcaa89a6-5970-4ab7-bb5d-6948d2f193fd/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97%E9%83%A8/04-%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/ThAutoVis"
    ]
}