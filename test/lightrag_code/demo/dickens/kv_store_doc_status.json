{
  "doc-3729c9d5d5cd491c19dd7093901f885f": {
    "status": "processed",
    "chunks_count": 5,
    "content": "{\n    \"query\": \"Lustre 文件系统有哪些核心组件？请说明每个组件的作用。\",\n    \"summaries\": [\n        \"Lustre 是一个高性能、可扩展的分布式文件系统，支持 POSIX 标准，具备高可用性、数据完整性及多种网络协议。它利用 ZFS 实现存储可靠性，支持 RDMA 等高速网络，提供原子操作和数据校验以确保一致性。Lustre 支持细粒度元数据锁定、多 MDT/OST 扩展、配额管理、文件布局控制及灾难恢复工具。其组件包括 MGS、MDS、MDT 和 OSS，支持 NFS/CIFS 导出，并基于开源 GPL 2.0 许可。\",\n        \"Lustre 是一种分布式文件系统，包含多个组件。MDT（元数据目标）用于存储文件系统的元数据，主 MDT 保存根目录，其他 MDT 可用于子目录。OSS（对象存储服务）为 OST（对象存储目标）提供 I/O 服务，每个 OST 存储文件数据。客户端通过 MDC（元数据客户端）和 OSC（对象存储客户端）访问文件系统。条带化目录可将目录分布到多个 MDT 上，形成统一的命名空间。LNet 是 Lustre 的网络通信基础设施。FID（文件标识符）用于唯一标识文件，支持多 MDT 环境。LFSCK 工具用于检查文件系统一致性。文件数据通过布局 EA 存储在 OST 上，客户端根据布局信息进行读写操作。\",\n        \"Lustre 文件系统操作手册摘要：  \\n本文档介绍了 Lustre 文件系统的多个工具和命令，包括 `llstat` 用于监控文件系统统计信息，`llverdev` 用于验证块设备的完整性，以及 `lshowmount` 用于显示 Lustre 导出信息。`llverdev` 可以在部分或完整模式下运行，检查设备是否存在坏扇区或访问问题。`lshowmount` 可显示挂载到服务器的客户端信息及 Lustre 服务的导出详情。此外，还提到了 `lst` 命令用于启动 LNet 自检，确保网络配置正确。这些工具帮助管理员监控、维护和诊断 Lustre 文件系统的运行状态。\"\n    ],\n    \"contents\": [\n        \"李硕“字闻粒度文件和细粒度元数据锁定: 许多客户端可以同时读取和修改相同的文件或目录。Lustre 分布式锁管理种 (LDLM) 确保了文件系统中所有客户端和服务融之间的文件是一致的。其中，MDT 锁管理带负责管理node 权限和路径名锁。个OST 都有其目己的锁管理釉，用于锁定存储在其上的文件条带，其性能与文件系统大小相关。“配额: 用户和组配额可用于 Lustre 文件系统。“容量增长: 通过向群集添加新的 OST 和 MDT，可以不中断地增加 Lustre 文件系统的大小和集群总惠宽。“受控文件布局: 可以在每个文件，每个目录或每个文件系统基础上配置跨 OST 的文件布局。这人允许了在单个文件系统中调整文件 IO 以适应特定的应用程序要求。Lustre 文件系统使用RAID-0 进行条带化并可在 OST 之间调和空间使用大小。。网络数据完整性保护: 从客户端发送到 OSS 的所有数据的校验和可防止数据在传输期间被损坏。”MPII/O: Lustre 架构具有专用的 MPI ADIO 层，优化了并行 VO 以匹配基础文件RRR> NFS 和 CIFS 导出: 可以使用NFS (通过 Linux knfsd 或 Ganesha) 或 CIFS(通过 Samba) 将 Lustre 文件重新导出，使其可以与非 Linux 客户端 〈如Microsoft*Windows 和 *Apple *Mac OS X *) 共享。\\\"灾难恢复工具: Lustre 文件系统提供在线分布式文件系统检查 〈LFSCK) ，当发生主要文件系统错误的情况下恢复存储组件乙间的一致性。Lustre 文件系统在存在文件系统不一致的情况下也可以运行，而 LFSCK 可以在文件系统正在使用时运行，因此 LFSCK 不需要在文件系统恢复生产之前完成。。 性能监视: Lustre 文件系统提供了多种机制来检查性能和进行调整。。开放源代码: Lustre 软件已获得在 Linux 操作系统上运行的 GPL 2.0 许可证。1.2. Lustre 组件Lustre 软件的安装包括管理服务器 (MGS) 和一个或多个与 Lustre 网络 (LNet)\",\n        \"已获得在 Linux 操作系统上运行的 GPL 2.0 许可证。1.2. Lustre 组件Lustre 软件的安装包括管理服务器 (MGS) 和一个或多个与 Lustre 网络 (LNet) 互连的 Lustre 文件系统。Lustre 文件系统组件的基本配置如下图所示:34\\nLustre 文件系统操作手册ayManagement Server (MGS) Management Target MGT}Metadata Server (MDS) Metadata Target (MILT }© Sy Co-located MS and MDS share storageLustre clientsEn Ethermet or InfiniBand Network © ®oss 1©. 8Object Storage Servers(OSSs}图 1: Lustre component1.2.1. 管理服务器 (MGS)MGS 存储集群中所有 Lustre 文件系统的配置信息，并将此信息提供给其他 Lustre组件。每个 Lustre target 通过联系 MGS 提供信息，而 Lustre 客户通过联系 MGS 获取信起Ju OMGS 最好有目己的存储空间，以便可以独立管理。但同时，MGS 可以与 MDS 共址并共享存储空间，如上图中所示。1.2.2 Lustre 文件系统组件每个 Lustre 文件系统由以下组件组成:“元数据服务器 (MDS) - MDS 使存储在一个或多个 MDT 中的元数据可供 Lustre客户器使用。每个 MDS 管理 Lustre 文件系统中的名称和目录，并为一个或多个本地 MDT 提供网络请求处理。“元数据目标 (MDT) - 每个文件系统至少有一个MDT。MDT 在 MDS 的附加存储上存储元数据〈例如文件名，上目录，权限和文件布局)。虽然共享存储目标上的MDT 可用于多个 MDS，但一次只能有一个 MDS 可以访问。如采当前 MDS 发生web, Wl A MDS 可以为MDT 提供服务，并将其提供给客户中。这被称为MDS故障切换。分布式命名空间环境 (DNE) 可文持多个 MDT。除保存文件系统根目录的主 MDT之外，还可以添加其他 MDS “it, fs MDS “aA AY MDT 来保存文件系统的子目录树。35\\nLustre 文件系统操作手册 eke\",\n        \"--offset=4096 --timestamc=1009839028 /dev/sdallverdev: /dev/sda is 4398046511104 bytes (4096.0 GB) in sizeTimestamp: 1009839028write completeread complete44.10. IlshowmountIshowmount 将显示 Lustre 导出信息。44.10.1. 梗概lshowmount [-ehlv]567\\nNO 一ios)Lustre 文件系统操作手册这ay44.10.2. 说明lshowmount 实用程序将显示有 Lustre 挂载到服务器的主机，并查找 MGS. MDS 和obdfilter 的导出信息。44.10.3. 选项选项 说明-e|--enumerate 所使lshowmount 在单独一行中列出所有挂上的客户兹，而不是将客户器列表压缩为hostrange 字符串。-h|--help 打印这些命令的用法相关帮助。-1|--lookup 迫使 Ishowmount 4 4%-F oR (R IP HHHEAY NID 主机名。-v|--verbose 迫使 Ishowmount 447 AES IRA A SE a, AN EN RS it上所有 Lustre 服务的总体信息。44.10.4. 文件/proc/fs/lustre/mgs/server/exports/uuid/nid/proc/fs/lustre/mds/server/exports/uuid/nid/proc/fs/lustre/obdfilter/server/exports/uuid/nid44.11. IstIst 将启动 LNet BK.44.11.1. 梗概lst44.11.2. 说明LNet 自检可帮助站点管理员确认 Lustre Networking (LNet) 是否已正确安装和配ft, LAK LNet 及其网络软件和硬件是否按预期运行。每个 LNet 目检都在会话环境中运行。一个节氮一次只能与一个会话相关联，以确保会话独占其运行的贡氮。每个会话由从单个和点进行创建、控制和监视，即目检控制VNHoCE AAA AGES A ees a. WAT IP oP ZS BT. ROR ILEZAP HY ATT ABE BEETS 4 PKS | Fo568\\nLustre 文件系统操作手册 译者: Ba测试配置通过描述和运行测试批次来进行创建。测试批次即命名的测试的集合，个测试由并行运行的多个单独的点对点测试组成。这些单独的点对点测试在被添加到测试批次时\",\n        \"的所有使得 Lustre 能件系统类型。FID-in-dirent 功能够识别多个 MDT 上的文件，独立于底层文能向后兼容 1.8 版本的 Idiskfs 磁盘格式。因此，从版本 1.8 FF级到版本 2.x 时，FID-in-dirent 功能不会目动后用。从版本 1.8 升级到版本 2.0 或 2.3 时，可手动启用FID-in-dirent，但这一操作只对新文件生效。LFSCK 文件系统一致性检查工具验证了MDT 和 OST 之间文件对象的一致性。具AUT F :.验证每个文件的 PID-in-dirent,37如其无效或丢失，则重新生成FID-in-dirent。\\nLustre 文件系统操作手册 译者: Ba。验证每个 linkEA 条目，如其无效或丢失，则重新生成。linkEA 由文件名和父类FID 组成，它作为扩展属性存储在文件本身中。因此，linkEA 可以用来重建文件的完整路径名。有关文件数据在OST 上的位置的信息将作为扩展属性布局 EA，存储在由FID 标WARY MDT 对象中〈有具体如下图所示)。戎该文件是普通文件〈即不是目录或符号链接) ，则 MDT 对象指向包含文件数据的OST 上的1对NOST 对象。若该MDT 文件指向一个对象，则所有文件数据都存储在该对象中。若该MDT 文件指向多个对象, 则使用RAID0 将文件数据划分为多个对象，将每个对象存储在不同的 OST 上。Layout EA Stored Data Stored on OSTson MDT图 3: Lustre cluster at scale当客户端读写文件时，首先从文件的MDT 对象中获取布局EA ，然后使用这个信息ESCHER EBT I/O, ERS ART RY OSS 贡点进行交互。有具体过程如下图所示。38\\nLustre 文件系统操作手册 译者:这ay1 File open requestedLayout EA returnedFID (Object J. Object K,...)Object Kwritten图 4: Lustre cluster at scaleLustre 文件系统的可用带宽如下:网络带宽等于OSS 到目标的总带宽。dena OSE Tet Atty (\",\n        \"存储的后备文件系统。这使 Lustre 能够利用 ZFS 的可扩展性和数据完整性特性来实现单个存储目标。“ 符合 POSIX 标准: 完整的POSIX 测试套件以完全相同的方式传递到本地的 ext4文件系统。在集群中，大多数操作都是原子操作，因此客户端永远不会看到损坏的数据或元数据。Lustre 软件文持mmap 0 MPF I/O 操作。.高性能异构网络: Lustre 软件支持各种高性能低延迟的网络，人允许远程直接内存访问 (RDMA) 方式实现在 InfiniBand、IntelOmniPath 等高级网络上的快速高效网络传输。可使用 Lustre 路由桥接多个RDMA 网络以获得最佳性能。Lustre 软件同时也集成了网络诊断。。 高可用性: Lustre 文件系统通过OSTSs (OSS targets) 或者MDT (MDS target) 的共享存储分区实现主动/主动故隐切换。Lustre 文件系统可以与各种高可用性 CHA)管理融一起工作，以实现目动故障切换并消除了单氮故了区 (NSPF) 。这使得应用程序透明恢复成为可能。多重安逆保护 (MMP) 提供了对高可用性系统中的错误的综合保护，和否则将会导致文件系统损坏。可配置多个 MDT 的主动/主动故障切换。这人允许了通过添加 MDT 存储设备和 MDS蔬氮来扩展 Lustre 文件系统的元数据性能。\\\"安全性: 默认情况下，TCP 连接只人允许授权端口通过。UNIX 组成员身份在 MDS上进行验证。“访问控制列表 (ACL) 及扩展属性: Lustre 安全模型遵循 UNIX 文件系统原则，并使用POSIX ACL 进行增强。请注意一些附加功能，如 root squash.“互操作性: Lustre 文件系统运行在各种 CPU 架构和混合端群集上，并在连续发布的一些主要 Lustre 软件版本乙间具有互操作性。“基于对象的体系结构: 客户端与磁盘文件结构相互隔离，可在不影响客户端的情况下升级存储体系结构。33\\nLustre 文件系统操作手册 译者: 李硕“字闻粒度文件和细粒度元数据锁定: 许多客户端可以同时读取和修改相同的文件或目录。Lustre 分布式锁管理种 (LDLM) 确保了文件系统中所有客户端和服务融之间的文件是一致\",\n        \"MDT。除保存文件系统根目录的主 MDT之外，还可以添加其他 MDS “it, fs MDS “aA AY MDT 来保存文件系统的子目录树。35\\nLustre 文件系统操作手册 eke<DCZR At在 Lustre 2.8 中，DNE 还允许文件系统将单个目录的文件分发到多个 MDT “5 fo分布在多个MDT 上的目录称为条带化目录。“对象存储服务希 (OSS): OSS 为一个或多个本地 OST 提供文件 IO 服务和网络请MDF. WAY, OSS 服务于两个到八个 O0ST，每个最多 16TiB ，在专用节点上配置一个MDT，在每个 OSS 蔬氮上配置两个或更多 OST，以及在大量计算节点上配置客户端。> 对象存储目标 (OST): 用户文件数据存储在一个或多个对象中，每个对象位于Lustre 文件系统的单独 OST 中。每个文件的对象数由用户配置，并可根据工作负载情况调试到最优性能。。 Lustre 客户器: Lustre 客户端是运行 Lustre 客户端软件的计算、可视化、棵面节ka, LARA Lustre 文件系统。Lustre 客户端软件为 Linux 虚拟文件系统和 Lustre AR ae GEE PRE PEP iTOE ELT “EL Ps, 〈(MGC) ，一个元数据客户端 (MDC) 和多个对象存储客户端90SC) 。一个客户端软件对应于文件系统中的一个 OST。WAKA (LOV) 通过聚合 OSC 以提供对所有 OST 的透明访问。因此，载入了Lustre文件系统的客户端会看到一个连贯的同步名称空间。多个客户端可以同时写入同一文件的不同部分，而其他客户端可以同时读取文件。罗辑元数据卷 (LMV) 通过聚合 MDC 提供一种与 LOV 文件访问方式类似的对所有 MDT 的透明访问。这人允许了客户端将多个 MDT 上的目录树视为一个单一的连贯名称空间，并将条带化目录合并到客户端形成一个单一目录以便用户和应用程序查看。下表给出了每个 Lustre 文件系统组件的附加存储要求，以及理想的硬件特性。MDSOSSsClien所需附加空间 硬件特性偏好S 1\",\n        \"运行 llverdey 总是更好，以便设备测试可以轻松地从停止点再次启动。在非常大的设备上运行完整验证可能非常耗时。我们建议您可以从部分验证开始，从而在进行完整验证之前确保设备至少部分可用。44.9.3. 选项选项 说明-c|--chunksize VOZAERKY) (e, BRUUEN 1048576) ) 。-f|--force HIST TMI, ANE Te Ie I BIT A BU BOK A的确认。-h|--help SAN TA GAY PBA566\\n—ULDNn—ULDNn1Lustre 文件系统操作手册 译者: Bar选项 说明-o offset 测试开始时的仿移量 (于字季，默认值为 0)。-1|--long 运行完整检查，即写入然后读取并验证磁盘上的每个块。-p|--partial 运行部分检查，仅对设备进行定期检查 (每次1GB)。-r|--read 在引w 模式运行测试之后，仅在只读 (验证) 模式下运行测试。-t timestamp 将测试开始时间设置为先前中断测试开始时打印的时间，以确保整个文件系统中的验证数据相同〈黑认值为当前时间)。-v|--verbose 在 verbose 模式下运行测试，列出所有读写操作。-w| --write 在写模式 (测试模式) Piet rallil (默认运行读和写测试)44.9.4. 示例在/devwsda 上运行部分设备验证:llverdev -v -p /dev/sdallverdev: permanently overwrite all data on /dev/sda (yes/no)? yllverdev: /dev/sda is 4398046511104 bytes (4096.0 GB) in sizeTimestamp: 1009839028Current write offset: 4096 kBTEAS _E—VS 77 FAIA ASI AAR, ARE EC A ic i PO 4096KB 处继续中断的验证:11verqev -f£ -v -p --offset=4096 --timestamc=1009839028 /dev/sdallverdev: /dev/sda is 4398046511104 bytes (4096.0 GB) in sizeTimestamp: 1009839028write completeread complete44.10. IlshowmountIshowmount 将显示\",\n        \"maqs或ost)44.8.4. 示例监控/proc/fs/lustre/osVOSS/ost/stats 文件，时间间隔为工秒，运行:1 llstat -1 1 ost44.8.5. 文件llstat 文件位于:1 /proc/fs/lustre/mdt/MDS/*/stats2 /proc/fs/lustre/mdt/* /exports/*/stats3 /proc/fs/lustre/mdc/*/stats565\\nLustre 文件系统操作手册 译者:这ay4 /proc/fs/lustre/1dlm/services/*/stats5 /proc/fs/lustre/1d1lm/namespaces/* /pool/stats6 /proc/fs/lustre/mgs/MGS/exports/*/stats7 /proc/fs/lustre/ost/OSS/*/stats8 /proc/fs/lustre/osc/*/stats9 /proc/fs/lustre/obdfilter/*/exports/*/stats10 /proc/fs/lustre/obdfilter/*/stats11—/proc/fs/lustre/llite/*/stats44.9. llverdevIlverdev 用于验证块设备是否全设备运行正常。44.9.1. 梗概llverdev [-c chunksize] [-f] [-h] [-o offset] [-l] [-p] [-r] [-t timestamp][-v] [-w] device44.9.2. 说明有时，内核驱动程序错误或硬件设备故隐影响了对完整的设备的正明访问。或者，磁盘上存在的坏扇区妨碍了数据的正确存储。通名情况下，主要为系统边界相关的缺陷(如 2°32 bytes, 2°31 sectors, 231 blocks, 2°32 blocks 上) 。llverdev 实用程序在整个设备上写入并验证唯一的测试模式来确保数据在写入后可访问，且写入磁盘某一部分的数据不会履盖磁盘另一部分上的数据。llverdev 应在大型设备 (TB) 上运行。在 verbose 模式下运行 llverdey 总是更好，以便设备测试可以轻松地从停止点再次启动。在非常大的设备上运行完整验证可能非常耗时。我们建议您可以从部分验证开始，从而在进行完整验证之前确保设备至少部分\",\n        \"，并将条带化目录合并到客户端形成一个单一目录以便用户和应用程序查看。下表给出了每个 Lustre 文件系统组件的附加存储要求，以及理想的硬件特性。MDSOSSsClien所需附加空间 硬件特性偏好S 1-2% 的文件系统容量 ”足够大的 CPU 功率, 足够大的内存, 快速磁盘存储。1-128 TB per OST, EAB AZT aE, ARTE OSSs 间均匀分配并与网络1-8 OSTs per OSS 带宽匹配ts 无需本地存储 低延民，高网络放宽1.2.3 Lustre 网络 LNebLustre Networking (LNet) 是一种定制网络 API，提供处理 Lustre 文件系统服务融和客户端的元数据和文件 IO 数据的通信基础设施。30\\nLustre 文件系统操作手册 译者: AA1.2.4 Lustre 集群在规模上，一个 Lustre 文件系统集群可以包含数百个 OSS FART TE Pe (如下图所示)。Lustre 集群中可以使用多种类型的网络，功能LustreClientsPOOOO:= InfiniBand network= Ethermet network1.3. LustreManagement Metadataservers (MiSs) servers [(MDSs}J MGT © MDTcba MGS 2 oes MIS 2factive) istandby) = fagtive) (standb vi¢ = failover capability =O55 7Object Storageservers (55s)LustreRouters=图 2: Lustre cluster at scale文件系统存储与 UOOSS 乙间的共享存储局用故队切换Qhject StorageTargets (O STs)Commodity Storage&)Enterprise-Class StorageArrays and SAN FabricLustre 使用文件标识符 (FID) 来替换用于识别文件或对象的 UNIX inode 编号。FID是一个 128 位的标识KF (OID),Lustre 目标中都是唯一的。这4符，其中 ，64 位用于存储唯一的序列号，32 位用于存储对象标识另外 32 位用于存储版本号。序列号在文件系统 COST 和 MDT) 中的所有使得 Lustre 能件系统类型。FID-in-dirent 功能够识别多个 MDT 上的文件，独立于底层文能向后兼容 1.8 版本的 Idiskfs 磁盘格式。因此，从版本 1.8\"\n    ]\n}",
    "content_summary": "{\n    \"query\": \"Lustre 文件系统有哪些核心组件？请说明每个组件的作用。\",\n    \"summaries\": [\n        \"Lustre 是一个高性能、可扩展的分布式文件系统，支持 POSIX 标准，具备高可用性、数据完整性及多种网络协议。它利用 ZFS 实现存储可靠性，支持 RDMA 等高速网络，提供原子操作和数据校验以确保一致性。Lustre 支持细粒度元数据锁定、多 MDT/OST 扩展、配额管理、文件布局控制及灾难恢复工具。其组件包括 MGS、MDS、MDT...",
    "content_length": 10146,
    "created_at": "2025-07-07T07:42:04.407947+00:00",
    "updated_at": "2025-07-07T07:43:11.531101+00:00",
    "file_path": "unknown_source"
  }
}